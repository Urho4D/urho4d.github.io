<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   C++ as the scripting language
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    C++ as the scripting language
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/50fa08a00c3000c8ee8e804e757a4ad7cc77b1c87d6258529ae0ef173cdb844e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      rico.decho
     </div>
     <div class="post_content">
      <p>
       If you want pure execution performance, the best scripting language I know is Cling.
      </p>
      <p>
       It’s an interactive C++ interpreter, based on LLVM.
      </p>
      <p>
       Basically it compiles C++ code interactively within the host application.
      </p>
      <p>
       That’s much more efficient than the DLL compilation hacks (RCCpp, etc)…
      </p>
      <p>
       And the best part of that is that once your scripts run fine in the C++ interpreter, you can add them to you C++ application build files
       <img alt=":grinning:" class="emoji" src="../../../images/f88b3dd8be457c7635b001536c53b98923c1c4de31b14a9aba5910f7f9e98e7c.png" title=":grinning:"/>
      </p>
      <p>
       Awesome !
      </p>
      <p>
       (reposted)
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9ecd58e1ecfa9c23f52a7001747ac5d5851912007d88f62cad8848af897737f1.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      TheSHEEEP
     </div>
     <div class="post_content">
      <p>
       Interesting. Not suited for all use cases (I don’t think you want to expose scripters to C++ syntax and pitfalls, for example), but for where it can be used, that’s pretty neat.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/684585e23c00534a4d0cb1c1bc542909f34fad260b0ad446b3e3b5a99d7771d5.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      sabotage3d
     </div>
     <div class="post_content">
      <p>
       Looks really cool. Thanks for sharing. Do you know if you can link it to external libraries?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/50fa08a00c3000c8ee8e804e757a4ad7cc77b1c87d6258529ae0ef173cdb844e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      rico.decho
     </div>
     <div class="post_content">
      <p>
       Basically, it’s just made to be embedded in a host application and directly use its declared types and functions.
      </p>
      <p>
       So I’ve absolutely no idea what should be done to make it work with loaded DLLs for instance.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/bc40148f161b8ef0f1ac53243cc7c85a7aabd7378e2bc7063dc29b570fba4030.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      godan
     </div>
     <div class="post_content">
      <p>
       This looks excellent!
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/6c0534b2d654d093a86c1854af37526996deb871a657ce37a4fd1d6c19bc1ddd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      hicup_82017
     </div>
     <div class="post_content">
      <p>
       Hello,
       <br/>
       Any of you tried this?
       <br/>
       I am just into Urho3d and interested to learn c++ a bit better. I only work with embedded C all the time. So this would allow me to bypass LUA learning and enhance my c++ skill set as well.
      </p>
      <p>
       Thanks in advance
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9ffa785b379770c490f83b61c2bf1a6fd3ee52ed493a1d689aef4f1ee2ebcdc3.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      JTippetts
     </div>
     <div class="post_content">
      <p>
       There’s no requirement of using Lua. Just use C++. What this thread is describing is a “different way” of using C++, that’s all. You’ve always been able to use C++ in the traditional fashion with Urho3D, as that is the language the engine itself is written in.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/6c0534b2d654d093a86c1854af37526996deb871a657ce37a4fd1d6c19bc1ddd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      hicup_82017
     </div>
     <div class="post_content">
      <p>
       Hi JTippetts,
       <br/>
       In a sense your suggestion actually makes more sense for a newbie like me.
       <br/>
       All I want to do is, learn and design a simple game. Since you guys already made whole Urho3D as a library. My game code compile time should be very less and worrying for it doesn’t make sense now.
       <br/>
       Update: Able to complete reading some of the sample programs in C++ only
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9e06bdaa9b192f1c9d4940fdd01e33b947cc0445d7b50f3766849acf8c3db6d9.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      1vanK
     </div>
     <div class="post_content">
      <p>
       <a class="onebox" href="http://chaiscript.com/" rel="nofollow noopener" target="_blank">
        http://chaiscript.com/
       </a>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/f8c56838151bae9112a91eeb86f55cc4ef2fdee5ef2d25afc934b4d508949063.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Leith
     </div>
     <div class="post_content">
      <p>
       Well, if we’re going to do scripting, we might as well go the whole hog, and deal with runtime compilation of c++ sourcecode - inside our runtime application. Let’s have our cake, and eat it too.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/616fa05f1013e3614a4d081038142fb528f27ac0018bf7a24d481c1658c1e90e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      elix22
     </div>
     <div class="post_content">
      <p>
       The only problem ChaiScript  is that performance is very bad
       <br/>
       See entry 48 in the Results table .
      </p>
      <aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/r-lyeh-archived/scriptorium">
       <header class="source">
        <img class="site-icon" height="32" src="../../../images/6a9577cd4f7fa6b75bde1025af85b944e9dd1388373b55ccba6e9f80ac2eae60.svg" width="32"/>
        <a href="https://github.com/r-lyeh-archived/scriptorium" rel="noopener nofollow ugc" target="_blank">
         GitHub
        </a>
       </header>
       <article class="onebox-body">
        <div class="aspect-image" style="--aspect-ratio:690/345;">
         <img class="thumbnail" height="345" src="../../../images/2d3546b8d124df6d17532c999161f2ec6509f24c9d64dfbbb1a5d229a9f8554b" width="690"/>
        </div>
        <h3>
         <a href="https://github.com/r-lyeh-archived/scriptorium" rel="noopener nofollow ugc" target="_blank">
          GitHub - r-lyeh-archived/scriptorium: Game Scripting Languages benchmarked
         </a>
        </h3>
        <p>
         :scroll: Game Scripting Languages benchmarked. Contribute to r-lyeh-archived/scriptorium development by creating an account on GitHub.
        </p>
       </article>
       <div class="onebox-metadata">
       </div>
       <div style="clear: both">
       </div>
      </aside>
      <p>
       I agree with Leith ,   Runtime Compiled C++   is the only way to go .
       <br/>
       Someone actually implemented such a thing
       <br/>
       I might surprise  with my own implementation in the future
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
      </p>
      <aside class="quote quote-modified" data-post="1" data-topic="318">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" loading="lazy" src="../../../images/57b731d315e1128417801a5477b7459a47be4d851945abbb149cea43e4a1714b.png" width="20"/>
        <a href="https://discourse.urho3d.io/t/runtime-compiled-c-in-urho3d-aka-scripting-in-c/318">
         Runtime-compiled C++ in Urho3D aka "Scripting in C++"
        </a>
        <a class="badge-wrapper bullet" href="/c/showcase/code-exchange/13">
         <span class="badge-category-parent-bg" style="background-color: #F1592A;">
         </span>
         <span class="badge-category-bg" style="background-color: #231F20;">
         </span>
         <span class="badge-category clear-badge" data-drop-close="true" style="" title="Share your helpful Urho3D code snippets, samples and tutorials here.">
          Code Exchange
         </span>
        </a>
       </div>
       <blockquote>
        I’ve been working in this a few weeks in my spare time after work. I took the idea of using C++ as a scripting language from
        <a data-bbcode="true" href="http://molecularmusings.wordpress.com/2013/08/27/using-runtime-compiled-c-code-as-a-scripting-language/" rel="noopener nofollow ugc">
         http://molecularmusings.wordpress.com/2013/08/27/using-runtime-compiled-c-code-as-a-scripting-language/
        </a>
        and
        <a data-bbcode="true" href="http://runtimecompiledcplusplus.blogspot.com" rel="noopener nofollow ugc">
         http://runtimecompiledcplusplus.blogspot.com
        </a>
        . This is technically called “Runtime-compiled C++”, which I’ll call RCCpp from now on. 
Obviously, C++ is not a real scripting language, nor it tends to be. The main goal is to shrink iterations’ time while having a quick …
       </blockquote>
      </aside>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/3ea7a1555aff4c5b3dd0274b8e7ae351c7e22708a771f0a92691672b7da6e609.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      S.L.C
     </div>
     <div class="post_content">
      <p>
       There is one thing that i don’t understand from this request. Which is that you don’t get anything in return.
      </p>
      <p>
       The reason scripting is implemented in something is to simplify the entire application and allow for quick prototyping. You try something in the script. And as it grows, you look at the parts that can be moved to native code and you do that.
      </p>
      <p>
       With this approach, you don’t simplify anything. You are already programming in C++. In fact, you are complicating the whole process by such a degree. That any new person that wants to try out the application itself will eventually get lost in the details and rules of the implementation.
      </p>
      <p>
       This isn’t the purpose of a scripting language. And if performance is your argument (JIT). Again, this isn’t the purpose of a scripting language. You move performance critical code to native code and expose it.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9e06bdaa9b192f1c9d4940fdd01e33b947cc0445d7b50f3766849acf8c3db6d9.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      1vanK
     </div>
     <div class="post_content">
      <blockquote>
       <p>
        The reason scripting is implemented in something is to simplify the entire application and allow for quick prototyping.
       </p>
      </blockquote>
      <p>
       Reason of scripting also is user’s mods and execute code from text form (triggers in levels or console commads).
      </p>
      <blockquote>
       <p>
        With this approach, you don’t simplify anything. You are already programming in C++.
       </p>
      </blockquote>
      <p>
       This is subjective. For me personally, C ++ is much easier than lua or angel script because I use it more often. For example idTech use c-like language for scripting.
      </p>
      <blockquote>
       <p>
        And as it grows, you look at the parts that can be moved to native code and you do that.
       </p>
      </blockquote>
      <p>
       This is simpler when the script is already C++ code.
      </p>
      <blockquote>
       <p>
        And if performance is your argument (JIT). Again, this isn’t the purpose of a scripting language.
       </p>
      </blockquote>
      <p>
       It is true.
      </p>
      <p>
       <a class="onebox" href="http://fabiensanglard.net/doom3/interviews.php#qvm" rel="nofollow noopener" target="_blank">
        http://fabiensanglard.net/doom3/interviews.php#qvm
       </a>
      </p>
      <p>
       EDIT:
       <br/>
       I like quake 3 approach.
       <a href="http://fabiensanglard.net/quake3/qvm.php" rel="nofollow noopener">
        http://fabiensanglard.net/quake3/qvm.php
       </a>
      </p>
      <pre><code class="lang-auto">Overall the VM system is very versatile since a Virtual Machine is capable of running:
* Interpreted bytecode
* Bytecode compiled to x86 instructions
* Code compiled as a Windows DLL
</code></pre>
      <p>
       So if you need perfomance, you can just compile same code to native dll
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9e06bdaa9b192f1c9d4940fdd01e33b947cc0445d7b50f3766849acf8c3db6d9.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      1vanK
     </div>
     <div class="post_content">
      <p>
       I played a little with the cling. “cling-demo” demonstrates embedding and running c++ scripts and works great. But… compilation of cling took more than an hour (I don’t know exactly how much, I just didn’t wait and went about my business) and demanded 40GB HDD space with Debug configuration. If there is a way to extract only the necessary parts of LLVM, that would be great (I don’t know if this is possible).
      </p>
      <p>
       p.s. Build instruction
       <a href="https://root.cern.ch/cling-build-instructions" rel="nofollow noopener">
        https://root.cern.ch/cling-build-instructions
       </a>
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>