<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Fork the Zombies- quick Halloween project
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Fork the Zombies- quick Halloween project
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/5155de84865443f645701859979970e389c6aae3703bcc007c11a5c2b13274e5.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      pilesofspam
     </div>
     <div class="post_content">
      <p>
       Like the title, this is a project completed over 3 weeks of spare time with Halloween as a goal.  Our neighborhood is spaced out just about right for Halloween, so we get kids from the surrounding neighborhoods trick-or-treating through here.  I set up an outdoor movie screen, built a “fork the zombies” game (my 13yo son’s idea) and a laser guided (wireless) crossbow.  I’ll get some technical details up in a bit but let me post some pictures first.
       <br/>
       <div class="lightbox-wrapper">
        <a class="lightbox" data-download-href="/uploads/short-url/cKLttkCEhTStv6BNzhTExR1yncq.jpeg?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5963686df23f016ca07ca69af8e7907c844503fe.jpeg" rel="noopener nofollow ugc" title="game1">
         <img alt="game1" data-base62-sha1="cKLttkCEhTStv6BNzhTExR1yncq" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/5963686df23f016ca07ca69af8e7907c844503fe_2_10x10.png" height="500" src="../../../images/08fd09854e2e5e9158281522d512db3e965f6195984c2d15a525dc03965ec80e.jpeg" srcset="https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/5963686df23f016ca07ca69af8e7907c844503fe_2_666x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/5/5963686df23f016ca07ca69af8e7907c844503fe_2_999x750.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/5/5963686df23f016ca07ca69af8e7907c844503fe.jpeg 2x" width="666"/>
         <div class="meta">
          <svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon">
           <use xlink:href="#far-image">
           </use>
          </svg>
          <span class="filename">
           game1
          </span>
          <span class="informations">
           1024×768 161 KB
          </span>
          <svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon">
           <use xlink:href="#discourse-expand">
           </use>
          </svg>
         </div>
        </a>
       </div>
       <br/>
       The crossbow has a class 1 red laser built into the front, and there’s a webcam up there with a red filter in front of it.  This means I have a calibration routine that I run so that the webcam can correlate where the red dot is on the screen (much like a mouse pointer).  I couldn’t run the calibration routine until it got dark and here (just outside Atlanta) it got dark enough at about 6:45.  I think this pic was taken at about 7:00pm.
      </p>
      <p>
       Here’s some close-ups of the crossbow:
       <br/>
       <div class="lightbox-wrapper">
        <a class="lightbox" data-download-href="/uploads/short-url/l1Y0rsE282Asdi9ia5jZpYG6yXh.jpeg?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/9/9366998a5d3b420aa0005ba816d2fa3f07189293.jpeg" rel="noopener nofollow ugc" title="bow1">
         <img alt="bow1" data-base62-sha1="l1Y0rsE282Asdi9ia5jZpYG6yXh" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/9/9366998a5d3b420aa0005ba816d2fa3f07189293_2_10x10.png" height="500" src="../../../images/29841b08298f797ffb1b8e97ab4ceea9fe57ee9bbd535b9c06f53d534c257bf5.jpeg" srcset="https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/9/9366998a5d3b420aa0005ba816d2fa3f07189293_2_375x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/9/9366998a5d3b420aa0005ba816d2fa3f07189293_2_562x750.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/9/9366998a5d3b420aa0005ba816d2fa3f07189293_2_750x1000.jpeg 2x" width="375"/>
         <div class="meta">
          <svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon">
           <use xlink:href="#far-image">
           </use>
          </svg>
          <span class="filename">
           bow1
          </span>
          <span class="informations">
           768×1024 225 KB
          </span>
          <svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon">
           <use xlink:href="#discourse-expand">
           </use>
          </svg>
         </div>
        </a>
       </div>
       <br/>
       <div class="lightbox-wrapper">
        <a class="lightbox" data-download-href="/uploads/short-url/5L9CkFkrBawYhoMKy3BfDvKONGT.jpeg?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/285f7571a5df2db399129ca504bd13e5807532d7.jpeg" rel="noopener nofollow ugc" title="bow2">
         <img alt="bow2" data-base62-sha1="5L9CkFkrBawYhoMKy3BfDvKONGT" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/2/285f7571a5df2db399129ca504bd13e5807532d7_2_10x10.png" height="500" src="../../../images/661f4df991a221a0d92f6f0361e350afeba2d0dde49de37e28a49d83e28ecad5.jpeg" srcset="https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/2/285f7571a5df2db399129ca504bd13e5807532d7_2_666x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/2/285f7571a5df2db399129ca504bd13e5807532d7_2_999x750.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/2/285f7571a5df2db399129ca504bd13e5807532d7.jpeg 2x" width="666"/>
         <div class="meta">
          <svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon">
           <use xlink:href="#far-image">
           </use>
          </svg>
          <span class="filename">
           bow2
          </span>
          <span class="informations">
           1024×768 214 KB
          </span>
          <svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon">
           <use xlink:href="#discourse-expand">
           </use>
          </svg>
         </div>
        </a>
       </div>
       <br/>
       It’s basically a 2x4 stud that I freehand carved into a rough crossbow shape.  I wanted to avoid guns, but you’ve got to fling forks at zombies.  Few technical points:
      </p>
      <ol>
       <li>
        There’s an esp32 wifi board in there, it reads trigger pulls (trigger is a microswitch up there with a 3D printed cap) and sends a UDP packet off to the hit detect.
       </li>
       <li>
        Hit detect is ALWAYS looking for that red laser, and normalizes it (0-1 in X and Y) from the lower left hand corner of the screen.
       </li>
       <li>
        When hit detect gets a UDP ‘Trigger’ packet, it sends a message (I’m using ZMQ pub/sub) to the game, which then spawns a fork in the same direction reported from hit detect.
       </li>
      </ol>
      <p>
       Game stayed pretty busy all night- my sounds and graphics are fairly cartoonish (flinging a fork is actually a mouth-harp
       <em>
        sproing
       </em>
       <br/>
       I got some great comments from the kids- a few wanted to know how the whole thing worked, one actually asked “How did you know zombies are allergic to forks?”  Here’s one of my favorite pics- a pack of fairies playing:
       <br/>
       <div class="lightbox-wrapper">
        <a class="lightbox" data-download-href="/uploads/short-url/A1qOd0eYVOq6aZDTR8yrGqjHrdC.jpeg?dl=1" href="https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/fc77b6edffe5b64df9479ec2534ae46bee495150.jpeg" rel="noopener nofollow ugc" title="faries">
         <img alt="faries" data-base62-sha1="A1qOd0eYVOq6aZDTR8yrGqjHrdC" data-small-upload="https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/fc77b6edffe5b64df9479ec2534ae46bee495150_2_10x10.png" height="500" src="../../../images/c843deb7d6eb66bcd13467a8d9dfb776e6ce434fb193f5985964b6cf725f7c7b.jpeg" srcset="https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/fc77b6edffe5b64df9479ec2534ae46bee495150_2_666x500.jpeg, https://global.discourse-cdn.com/standard17/uploads/urho3d/optimized/2X/f/fc77b6edffe5b64df9479ec2534ae46bee495150_2_999x750.jpeg 1.5x, https://global.discourse-cdn.com/standard17/uploads/urho3d/original/2X/f/fc77b6edffe5b64df9479ec2534ae46bee495150.jpeg 2x" width="666"/>
         <div class="meta">
          <svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon">
           <use xlink:href="#far-image">
           </use>
          </svg>
          <span class="filename">
           faries
          </span>
          <span class="informations">
           1024×768 72.1 KB
          </span>
          <svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon">
           <use xlink:href="#discourse-expand">
           </use>
          </svg>
         </div>
        </a>
       </div>
      </p>
      <p>
       For technical details, there’s a projector connected to a Jetson Nano running the game, and another nano connected to a webcam doing hit detect.  Besides that it’s just the laser and the esp32 in the crossow sending UDP packets, all are connected to a wifi router.  Honestly you could skip the nanos and just do it on a single laptop, this is definitely more portable.  I will release the source with instructions to build, but I need to get some credits in order first- the zombies aren’t mine (inexpensive turbosquid purchase, I modified the skins) and most of the sounds came from
       <a href="http://freesound.org" rel="noopener nofollow ugc">
        freesound.org
       </a>
       .  I need to attribute these to their proper authors before I can release.  I do have the list, hopefully I can get that in order this week.  The game plays fine on a PC, you just mouse click to fire a fork, but it’s not as challenging because I have the crossbow limited to 1 shot every 1/2 second.  The game is designed to last 1 minute or less.
       <br/>
       The hit detect stuff is python and openCV, I’ll probably write (and link to) a separate article on how all that works.  Meanwhile for the Urho stuff- what an awesome engine!  This was a ton of fun.  I started with example 6- skeletal animation, and imported the zombies.  Then I brought in elements of example 11- Physics for hit detect and fork flight.  From there it was just steering things where I wanted them to go!  I think the hardest part was getting ZMQ to work with cmake.
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>