<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Spherical and Cubic world physics samples
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Spherical and Cubic world physics samples
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       Just another video of something else possible with the engine.
      </p>
      <p>
       Have a great weekend
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
      </p>
      <p>
       edit: repo
       <a class="inline-onebox-loading" href="https://github.com/Lumak/Urho3D-Spherical-World">
        https://github.com/Lumak/Urho3D-Spherical-World
       </a>
      </p>
      <p>
       <a class="onebox" href="https://youtu.be/9h2AygIzFMQ" target="_blank">
        https://youtu.be/9h2AygIzFMQ
       </a>
      </p>
      <p>
       edit2: added square world physics sample
       <br/>
       <img alt="" src="../../../images/49a3c7b64cb5e800829854674c173b3ff40a40f5dafeee7dcfb9ccf8e664748b.jpg"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/aa37c204b97818f682b86ad9ad1e641f3dc3df9a6f189cfcffd203013c171399.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      HeadClot
     </div>
     <div class="post_content">
      <p>
       How did you accomplish this?
      </p>
      <p>
       Can you talk about the techniques that you used?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       Sure. It’s not complicated as it seems, but I did come across some odd behaviors.
       <br/>
       First, you’ll need to calculate the char’s direction to center of the sphere which becomes new gravity and apply:
      </p>
      <blockquote>
       <p>
        body-&gt;SetGravityOverride(dirToCenterOfSphere * 9.81f);
       </p>
      </blockquote>
      <p>
       every frame.  The
      </p>
      <blockquote>
       <p>
        dirToCenterOfSphere * -1.0f
       </p>
      </blockquote>
      <p>
       becomes char’s normal, and from this you can derive the forward and right vectors which then provide the orientation for the character, i.e. Quaternion(right, up, forward).
      </p>
      <p>
       Some odd behaviors that I’m seeing are that if you use inertia bounding box derived from a capsule, physics wants to pull the body back up to the top (like a magnet) ,and second is that there seems to be some odd acceleration going on when the char is 1/4 and 3/4 way down the sphere, something I’m still trying to figure out.
      </p>
      <p>
       *edit: err, I shouldn’t say acceleration at 1/4 and 3/4 because char doesn’t move if I stop moving. It’s more like no braking is applied at those areas.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       added a link to the repo - see the1st post.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       fixed the jump force error, and added a square world
      </p>
      <p>
       <img alt="" src="../../../images/49a3c7b64cb5e800829854674c173b3ff40a40f5dafeee7dcfb9ccf8e664748b.jpg"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       A couple more changes:
       <br/>
       -corrected rotation calc. on surface
       <br/>
       -renamed to cubic world
      </p>
      <p>
       That should be the last of it. Let me know if you find any problem. Thx.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/38ba090e68e80d996997d1577a6db4973e3333bddb338b81b65f9e835ac64a44.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      rku
     </div>
     <div class="post_content">
      <p>
       This is awesome. How does character behave when you jump over the edge of the cube?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       It transitions properly.
       <br/>
       Here’s a vid:
      </p>
      <div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="QPoIplaT-ZA" data-youtube-title="Urho3D spherical and cubic world">
      </div>
      <p>
       edit: provided a url
       <br/>
       edit2: something weird is going on with youtube and I can’t provide a viewable link.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/a90ddfa002995c31b5c93aca4213c480a31c7272db11e21266b71156c46856c7.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Eugene
     </div>
     <div class="post_content">
      <p>
       I can’t consider this blinking as truly 'properly transition’
       <br/>
       It seems that character movement (I mean, orientation) is not smooth. Is it hard to fix?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       I’m not sure how else to transition it, but sounds like you’ve seen it done differently some where. Can you provide a video link?
      </p>
      <p>
       edit: not sure if smoothing out the camera or character orientation or both would be required, or if attempting this smooth transition would be harder on the eyes. I’d like to see an example.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/a90ddfa002995c31b5c93aca4213c480a31c7272db11e21266b71156c46856c7.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Eugene
     </div>
     <div class="post_content">
      <p>
       Portal 2 has pretty nice transition when UP is changed.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f4d89a6ec8768b8bd5426c30c4812f04cddcb7e43e803179951cb20a4f1c8bf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Modanung
     </div>
     <div class="post_content">
      <p>
       Cylindrical gravity for the edges and spherical for the corners would give the transitions there a more natural feel, I think.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       <span class="mention">
        @Eugene
       </span>
       <span class="mention">
        @Modanung
       </span>
      </p>
      <p>
       Okay, thanks for the info. I’ve seen the Portal2 vid and see that the dynamics on surface changes are treated as a cylindrical surface, where the character sticks to the surface as it transitions from one surface to the other. But that’s not the dynamics that I’m looking to achieve.  What I’m looking for is that when a character steps off an edge, I want it to actually fall and use physics to transition to a new surface gravity.  I did add a few frames to lerp the character’s orientation opposed to a single frame transition.  It looks better.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/2194203647fc71ebd3a81c178cf976e0334bd969987373fb0b53451359637a38.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      mizahnyx
     </div>
     <div class="post_content">
      <p>
       Thanks for the info! I was really curious of it. Keep the great work!
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>