<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   External imgui integration
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    External imgui integration
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/668470d56163353e1e4d4d67dadbcf02db3f7389e58e6e01b1650a16815e3949.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Enhex
     </div>
     <div class="post_content">
      <p>
       External library for integrating
       <a data-bbcode="true" href="https://github.com/ocornut/imgui" rel="nofollow noopener">
        imgui
       </a>
       with
       <a data-bbcode="true" href="https://github.com/urho3d/Urho3D" rel="nofollow noopener">
        Urho3D
       </a>
       . No forks to switch to and maintain.
      </p>
      <p>
       Check the Github page for more info:
       <a href="https://github.com/Enhex/Urho3D_imgui" rel="nofollow noopener">
        github.com/Enhex/Urho3D_imgui
       </a>
      </p>
      <p>
       <div class="lightbox-wrapper">
        <a class="lightbox" href="http://i.imgur.com/LMpD6GO.jpg" rel="nofollow noopener" title="">
         <img alt="" height="500" src="../../../images/ed91180fb648d58054a48dd48fe1b0b2982e42e46a2fa929365cfca02641f4e1.jpg" width="645"/>
         <div class="meta">
          <svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon">
           <use xlink:href="#far-image">
           </use>
          </svg>
          <span class="filename">
          </span>
          <span class="informations">
           1040×806
          </span>
          <svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon">
           <use xlink:href="#discourse-expand">
           </use>
          </svg>
         </div>
        </a>
       </div>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/5ca901bbdca7e2c389e390ef3622f34c722edf62d2b8c084b74b25ac3c099387.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      ghidra
     </div>
     <div class="post_content">
      <p>
       This is cool! Show the node graph!
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/668470d56163353e1e4d4d67dadbcf02db3f7389e58e6e01b1650a16815e3949.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Enhex
     </div>
     <div class="post_content">
      <aside class="quote no-group" data-username="ghidra">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/d5a5c26f12c5448030667dc5c16c2c9d1dda237a6826ce05e729dd69e1661500.png" width="20"/>
        ghidra:
       </div>
       <blockquote>
        <p>
         This is cool! Show the node graph!
        </p>
       </blockquote>
      </aside>
      <p>
       Graph example:
       <br/>
       <div class="lightbox-wrapper">
        <a class="lightbox" href="http://i.imgur.com/liQa3JO.png" rel="nofollow noopener" title="">
         <img alt="" height="500" src="../../../images/98bf05c33d36e7c71b6cbb85db4a93392afb13104ade1fab3864c6050f620cec.png" width="645"/>
         <div class="meta">
          <svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon">
           <use xlink:href="#far-image">
           </use>
          </svg>
          <span class="filename">
          </span>
          <span class="informations">
           1040×806
          </span>
          <svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon">
           <use xlink:href="#discourse-expand">
           </use>
          </svg>
         </div>
        </a>
       </div>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       The node graph thingy is really neat.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/a9aa60fc39b46d07cb2562f0b11ec4762a64197339da1365b1faaafe4f4b3be8.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      thebluefish
     </div>
     <div class="post_content">
      <p>
       Is there a reason you’re using GLEW directly? We can use imgui within Urho3D’s rendering system directly, thus making it a single port instead of a port for each graphics back-end.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9eff032e89ec93f81cbb0a8b2e416c52be6a27abce27c4ed36911a61ed12cecf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      vivienneanthony
     </div>
     <div class="post_content">
      <aside class="quote no-group" data-username="Enhex">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/2f7de3bf772e9fa884f9013ea64c3ac4142baa3efa8c274f19892d379dc40915.png" width="20"/>
        Enhex:
       </div>
       <blockquote>
        <p>
         [quote=“ghidra”]This is cool! Show the node graph!
        </p>
       </blockquote>
      </aside>
      <p>
       Graph example:
       <br/>
       <div class="lightbox-wrapper">
        <a class="lightbox" href="http://i.imgur.com/liQa3JO.png" rel="nofollow noopener" title="">
         <img alt="" height="500" src="../../../images/98bf05c33d36e7c71b6cbb85db4a93392afb13104ade1fab3864c6050f620cec.png" width="645"/>
         <div class="meta">
          <svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon">
           <use xlink:href="#far-image">
           </use>
          </svg>
          <span class="filename">
          </span>
          <span class="informations">
           1040×806
          </span>
          <svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon">
           <use xlink:href="#discourse-expand">
           </use>
          </svg>
         </div>
        </a>
       </div>
       [/quote]
      </p>
      <p>
       Wow. That’s pretty cool. Me need to play with IMGUI more.
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/668470d56163353e1e4d4d67dadbcf02db3f7389e58e6e01b1650a16815e3949.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Enhex
     </div>
     <div class="post_content">
      <aside class="quote no-group" data-username="thebluefish">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/4b1209bc2cff158cac3deb94b06eafe95cc328b5f8c8b58f2a70b4f3a07aa61e.png" width="20"/>
        thebluefish:
       </div>
       <blockquote>
        <p>
         Is there a reason you’re using GLEW directly? We can use imgui within Urho3D’s rendering system directly, thus making it a single port instead of a port for each graphics back-end.
        </p>
       </blockquote>
      </aside>
      <p>
       I tried that first but it doesn’t work well. It requires copying the buffers, increasing the vertex coordinates from 2d to 3d, the UI elements come out misaligned, it requires extra shaders, and my attempt was bugged.
      </p>
      <p>
       Instead I took the renderer that comes with imgui’s ogl3 sample. It works flawlessly, no extra overhead, and officially maintained by imgui.
       <br/>
       imgui also has d3d 9/11 renderers, but I didn’t try to include them.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/684585e23c00534a4d0cb1c1bc542909f34fad260b0ad446b3e3b5a99d7771d5.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      sabotage3d
     </div>
     <div class="post_content">
      <p>
       Quite cool for node based stuff. Do you know if it supports a spline ramp editing?
       <br/>
       Similar to this one.
       <br/>
       <img alt="" height="" src="../../../images/56192ac23697fc4865734c414c995591ab0c0e6b56090155ec8aedf21e372ac1.jpg" width=""/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/668470d56163353e1e4d4d67dadbcf02db3f7389e58e6e01b1650a16815e3949.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Enhex
     </div>
     <div class="post_content">
      <p>
       [quote=“sabotage3d”]Quite cool for node based stuff. Do you know if it supports a spline ramp editing?
       <br/>
       Similar to this one.
       <br/>
       <img alt="" height="" src="../../../images/56192ac23697fc4865734c414c995591ab0c0e6b56090155ec8aedf21e372ac1.jpg" width=""/>
       [/quote]
       <br/>
       Someone made an implementation:
       <br/>
       <a href="https://github.com/ocornut/imgui/issues/123#issuecomment-162375868" rel="nofollow noopener">
        github.com/ocornut/imgui/issues … -162375868
       </a>
       <br/>
       <img alt="" height="221" src="../../../images/9afb65182ce06f180288f5a887719c8da1ebad6576035225cde3103a02252223.gif" width="450"/>
       <br/>
       Note that imgui’s API is abstracted from the integration implementation, so imgui code should work regardless of what it was made for.
      </p>
      <p>
       You can check out the Gallery section here:
       <a href="https://github.com/ocornut/imgui" rel="nofollow noopener">
        github.com/ocornut/imgui
       </a>
       <br/>
       And the screenshots thread here:
       <a href="https://github.com/ocornut/imgui/issues/123" rel="nofollow noopener">
        github.com/ocornut/imgui/issues/123
       </a>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/5775ca4ae33489a2bcc299dd30363673c37d994ec83cfc8b666b914026ff2719.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      rasteron
     </div>
     <div class="post_content">
      <p>
       nice!
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/bc40148f161b8ef0f1ac53243cc7c85a7aabd7378e2bc7063dc29b570fba4030.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      godan
     </div>
     <div class="post_content">
      <p>
       So, I’ve managed to create implement Urho’s Cmake build system with your excellent Imgui implementation and it now builds happily on OSX.
      </p>
      <p>
       However, I’m running in to that problem where the Retina frame buffer size is larger than the screen coords. This results in tiny ui elements:
      </p>
      <p>
       <img alt="" height="" src="../../../images/7b8938cb6ee4ef3265a5eaaecb13644488ff9746cfc668f893bc65678acfdf11.png" width=""/>
       .
      </p>
      <p>
       This issue was apparently fixed for ImGui’s GLFW bindings:
       <a href="https://github.com/ocornut/imgui/issues/441" rel="nofollow noopener">
        github.com/ocornut/imgui/issues/441
       </a>
       . And I can verify that it works on my mac. In this Urho_imgui implementation, I tried manually setting the FrameBufferScale to (2,2), but this yield a UI elements that were placed off the screen dimensions. Also, I checked what ImGui thinks the frame buffer size is by default and it comes up as (1,1).
      </p>
      <p>
       Any ideas on how to fix this?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/bc40148f161b8ef0f1ac53243cc7c85a7aabd7378e2bc7063dc29b570fba4030.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      godan
     </div>
     <div class="post_content">
      <p>
       Also, this implementation won’t work with Emscripten - possibly a GLEW issue?
      </p>
      <p>
       I’d be happy to sure my CMake build system if anyone is interested.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/bc40148f161b8ef0f1ac53243cc7c85a7aabd7378e2bc7063dc29b570fba4030.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      godan
     </div>
     <div class="post_content">
      <p>
       Progress!
      </p>
      <p>
       So, it looks like on Retina screens, Urho thinks that the screen size is twice the specified resolution, and the frame buffer scale is 1:1. On the other hand, ImGui maintains the original resolution, but has a 2:2 frame buffer scale. I’m not sure what is the better approach.
      </p>
      <p>
       Nonetheless, for any another OSX imgui-urho users, the fix is set:
      </p>
      <pre><code class="lang-auto">		io.DisplaySize = ImVec2(0.5f * (float)graphics-&gt;GetWidth(), 0.5f *(float)graphics-&gt;GetHeight());
		io.DisplayFramebufferScale = ImVec2((float)2.0f, (float)2.0f);</code></pre>
      <p>
       when compiling to retina devices (or other devices with none 1:1 screen to frame buffer scale).
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/668470d56163353e1e4d4d67dadbcf02db3f7389e58e6e01b1650a16815e3949.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Enhex
     </div>
     <div class="post_content">
      <p>
       [quote=“godan”]Also, this implementation won’t work with Emscripten - possibly a GLEW issue?
      </p>
      <p>
       I’d be happy to sure my CMake build system if anyone is interested.[/quote]
       <br/>
       I’ve used the renderer from IMGUI’s OGL3 example, so it makes sense it wouldn’t work with Emscripten out of the box.
       <br/>
       That renderer is tiny (~120 lines), and Emscripten can use specific versions of openGL (mainly mapping to webGL or ES 2.0 emulation):
       <br/>
       <a href="http://kripken.github.io/emscripten-site/docs/porting/multimedia_and_graphics/OpenGL-support.html" rel="nofollow noopener">
        kripken.github.io/emscripten-sit … pport.html
       </a>
      </p>
      <p>
       If you’d like to contribute your CMake support that’s be great. Make a pull request on the project’s GitHub.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/c3a3143a1637d7900c0c03562e537247c88bd0261246779f3a4e7cdfcddb6f74.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      arcanosam
     </div>
     <div class="post_content">
      <p>
       hi!
      </p>
      <p>
       I’m interesting in use
       <span class="bbcode-b">
        imgui
       </span>
       with
       <span class="bbcode-b">
        Urho3d
       </span>
       thinking in future to use with
       <span class="bbcode-b">
        emscripten
       </span>
       toolchain.
      </p>
      <p>
       Any tips to I try this integration on on windows (version 8.1 in my job and 10 in my home)?
      </p>
      <p>
       Some tutorial or wiki do you recommend?
      </p>
      <p>
       thanks in advanced.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/c3a3143a1637d7900c0c03562e537247c88bd0261246779f3a4e7cdfcddb6f74.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      arcanosam
     </div>
     <div class="post_content">
      <p>
       [quote=“Enhex”][quote=“godan”]Also, this implementation won’t work with Emscripten - possibly a GLEW issue?
      </p>
      <p>
       I’d be happy to sure my CMake build system if anyone is interested.[/quote]
       <br/>
       I’ve used the renderer from IMGUI’s OGL3 example, so it makes sense it wouldn’t work with Emscripten out of the box.
       <br/>
       That renderer is tiny (~120 lines), and Emscripten can use specific versions of openGL (mainly mapping to webGL or ES 2.0 emulation):
       <br/>
       <a href="http://kripken.github.io/emscripten-site/docs/porting/multimedia_and_graphics/OpenGL-support.html" rel="nofollow noopener">
        kripken.github.io/emscripten-sit … pport.html
       </a>
      </p>
      <p>
       If you’d like to contribute your CMake support that’s be great. Make a pull request on the project’s GitHub.[/quote]
      </p>
      <p>
       if I adapted this IMGUI’s OGL3 example to use SDL, so it’s possible that when build with emscripten works outside of the box?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/668470d56163353e1e4d4d67dadbcf02db3f7389e58e6e01b1650a16815e3949.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Enhex
     </div>
     <div class="post_content">
      <p>
       [quote=“arcanosam”]
       <br/>
       if I adapted this IMGUI’s OGL3 example to use SDL, so it’s possible that when build with emscripten works outside of the box?[/quote]
       <br/>
       I don’t know because I never tried it. Just try it yourself and see if it works. If it doesn’t work you can use Urho’s GUI so it isn’t that critical.
       <br/>
       Keep in ind that imgui is mainly designed as a tools’ GUI, so it may lack some features you may want.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/c3a3143a1637d7900c0c03562e537247c88bd0261246779f3a4e7cdfcddb6f74.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      arcanosam
     </div>
     <div class="post_content">
      <p>
       thanks.
      </p>
      <p>
       recommend some cmake for beguinners? (Seems it I will need it…) I don’t know nothing about cmake…
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/bc40148f161b8ef0f1ac53243cc7c85a7aabd7378e2bc7063dc29b570fba4030.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      godan
     </div>
     <div class="post_content">
      <p>
       Just to add my .02$ - I played around with IMGUI quite a bit and was seriously considering it for a project. In the end, I found it MUCH easier to work with Urho’s native UI. I admit, all the XML files and the sprite sheets and the somewhat verbose code is a bit confusing at first. After a while, though, it really pays off - especially if you need to do more than tweak a bunch of sliders.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/c3a3143a1637d7900c0c03562e537247c88bd0261246779f3a4e7cdfcddb6f74.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      arcanosam
     </div>
     <div class="post_content">
      <p>
       thanks godan. it’s really good to know it. I’m really happy when I see that Urho already has a support to make GUI.
      </p>
      <p>
       yesterday when I build with samples for the first time using emscripten toolchain and see in the end the html and asmjs working was awesome!
      </p>
      <p>
       And I have a prefference to using only the resources of a framework and not give easy to third party
      </p>
      <p>
       p.s.: sorry for my bad english.
      </p>
      <p>
       thanks guys
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/62a71395d4c17ae6d13ba5dd2ab14fd64e5b7af1784f42b10524e596f6c9a9f6.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      SirNate0
     </div>
     <div class="post_content">
      <p>
       Sorry to revive the old topic, but I figured out how to get the integration working on Emscripten. The issue proved to be the draw call silently failing because of a lack of GL3 support. Simply not specifying the baseVertexIndex resulted in it working. See below for more info:
      </p>
      <aside class="onebox githubissue">
       <header class="source">
        <a href="https://github.com/Enhex/Urho3D_imgui/issues/3" rel="noopener" target="_blank">
         github.com/Enhex/Urho3D_imgui
        </a>
       </header>
       <article class="onebox-body">
        <div class="github-row">
         <div class="github-icon-container" title="Issue">
          <svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 14 16" width="60">
           <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z">
           </path>
          </svg>
         </div>
         <div class="github-info-container">
          <h4>
           <a href="https://github.com/Enhex/Urho3D_imgui/issues/3" rel="noopener" target="_blank">
            Emscripten Support
           </a>
          </h4>
          <div class="github-info">
           <div class="date">
            opened
            <span class="discourse-local-date" data-date="2021-01-23" data-format="ll" data-time="06:04:34" data-timezone="UTC">
             06:04AM - 23 Jan 21 UTC
            </span>
           </div>
           <div class="user">
            <a href="https://github.com/SirNate0" rel="noopener" target="_blank">
             <img alt="SirNate0" class="onebox-avatar-inline" height="20" src="../../../images/e6a05f5f8747e37a0759ac956ba13e123f53302c9a45f194517107847c9900a4" width="20"/>
             SirNate0
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="github-row">
         <p class="github-content">
          I saw in the forum thread that it didn't work with Emscripten, but I found the issue that was stopping it....
         </p>
        </div>
        <div class="labels">
        </div>
       </article>
       <div class="onebox-metadata">
       </div>
       <div style="clear: both">
       </div>
      </aside>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>