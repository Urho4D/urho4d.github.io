<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Using Urho3D as external library with VS 2017
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Using Urho3D as external library with VS 2017
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/d0db9f1146dcb24b37638641ed3fd7e1e8fd6f2a366473517dfb99144b50d735.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      DainTorson
     </div>
     <div class="post_content">
      <p>
       I’m trying to use Urho3D as external library with CMake and VS 2017 as shown here:
       <br/>
       <aside class="onebox whitelistedgeneric">
        <header class="source">
         <a href="https://urho3d.github.io/documentation/1.6/_using_library.html" rel="nofollow noopener" target="_blank">
          Urho3D
         </a>
        </header>
        <article class="onebox-body">
         <h3>
          <a href="https://urho3d.github.io/documentation/1.6/_using_library.html" rel="nofollow noopener" target="_blank">
           Using Urho3D as external library
          </a>
         </h3>
         <p>
          Urho3D is a free lightweight, cross-platform 2D and 3D game engine implemented in C++ and released under the MIT license. Greatly inspired by OGRE and Horde3D.
         </p>
        </article>
        <div class="onebox-metadata">
        </div>
        <div style="clear: both">
        </div>
       </aside>
       <br/>
       I managed to build the project, but the font and picture do no load regardless of the place where I put them.
       <br/>
       Moreover, when I try to specify any other build folder than default, CMake fails to find Urho3D_d.lib.
      </p>
      <p>
       Any help will be useful.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       You have to show us the exact steps you have taken as your problem description is not clear where the mistake happened. The build system could not find the Urho3D library simply means you have made a mistake somewhere.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/d0db9f1146dcb24b37638641ed3fd7e1e8fd6f2a366473517dfb99144b50d735.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      DainTorson
     </div>
     <div class="post_content">
      <p>
       Thank you for your reply.
       <br/>
       Well, I’ll try to be as specific as I can.
       <br/>
       I’ve created a folder with the following structure:
      </p>
      <p>
       urho-test/
       <br/>
       ├ bin/
       <br/>
       │  ├ Data/
       <br/>
       │  └ CoreData/
       <br/>
       ├ CMake/
       <br/>
       │  ├ Modules/
       <br/>
       │  └ Toolchains/
       <br/>
       ├ CMakeLists.txt
       <br/>
       ├ HelloWorld.cpp
       <br/>
       ├ HelloWorld.h
       <br/>
       ├ Sample.h
       <br/>
       └ Sample.inl
      </p>
      <p>
       where all of the sources were taken from samples of Urho3D.
      </p>
      <p>
       My CMakeLists.txt is identical to the one from here:
       <br/>
       <aside class="onebox whitelistedgeneric">
        <header class="source">
         <a href="https://urho3d.github.io/documentation/1.6/_using_library.html" rel="nofollow noopener" target="_blank">
          Urho3D
         </a>
        </header>
        <article class="onebox-body">
         <h3>
          <a href="https://urho3d.github.io/documentation/1.6/_using_library.html" rel="nofollow noopener" target="_blank">
           Using Urho3D as external library
          </a>
         </h3>
         <p>
          Urho3D is a free lightweight, cross-platform 2D and 3D game engine implemented in C++ and released under the MIT license. Greatly inspired by OGRE and Horde3D.
         </p>
        </article>
        <div class="onebox-metadata">
        </div>
        <div style="clear: both">
        </div>
       </aside>
      </p>
      <p>
       I’ve only specified the location of Urho3D with the folowing command:
       <br/>
       <code>
        set(URHO3D_HOME "c:/Urho3d/")
       </code>
      </p>
      <p>
       Then I’ve opened this folder with Visual Studio 2017 (since it now supports CMake) and got the following output from the CMake:
      </p>
      <pre><code>1&gt; Command line: C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO\2017\COMMUNITY\COMMON7\IDE\COMMONEXTENSIONS\MICROSOFT\CMAKE\CMake\bin\cmake.exe  -G "Visual Studio 15 2017" -DCMAKE_INSTALL_PREFIX:PATH="C:\Users\Ales\AppData\Local\CMakeBuild\b127fd59-b858-303f-8a0e-0b36e52b0dd1\build\install"  -DCMAKE_CONFIGURATION_TYPES="Debug" "D:\dev\urho-test"
1&gt; Working directory: C:\Users\Ales\AppData\Local\CMakeBuild\b127fd59-b858-303f-8a0e-0b36e52b0dd1\build\x86-Debug
1&gt; -- Found Urho3D: C:/Urho3d/lib/Urho3D_d.lib (found version "Unversioned")
1&gt; -- Looking for C++ include d3dcompiler.h
1&gt; -- Looking for C++ include d3dcompiler.h - found
1&gt; -- Looking for C++ include d3d9.h
1&gt; -- Looking for C++ include d3d9.h - found
1&gt; -- Looking for C++ include d3d11.h
1&gt; -- Looking for C++ include d3d11.h - found
1&gt; -- Looking for C++ include ddraw.h
1&gt; -- Looking for C++ include ddraw.h - found
1&gt; -- Looking for C++ include dsound.h
1&gt; -- Looking for C++ include dsound.h - found
1&gt; -- Looking for C++ include dinput.h
1&gt; -- Looking for C++ include dinput.h - found
1&gt; -- Looking for C++ include dxgi.h
1&gt; -- Looking for C++ include dxgi.h - found
1&gt; -- Looking for C++ include xaudio2.h
1&gt; -- Looking for C++ include xaudio2.h - found
1&gt; -- Looking for include files windows.h, xinput.h
1&gt; -- Looking for include files windows.h, xinput.h - found
1&gt; -- Found DirectX: TRUE  found components:  DInput DSound XAudio2 XInput 
1&gt; Error copying file (if different) from "D:/dev/urho-test/bin/Autoload" to "C:/Users/Ales/AppData/Local/CMakeBuild/b127fd59-b858-303f-8a0e-0b36e52b0dd1/build/x86-Debug/bin/Autoload".
1&gt; -- Configuring done
1&gt; -- Generating done
1&gt; -- Build files have been written to: C:/Users/Ales/AppData/Local/CMakeBuild/b127fd59-b858-303f-8a0e-0b36e52b0dd1/build/x86-Debug
1&gt; Starting CMake target info extraction ...
1&gt; CMake server connection made.
</code></pre>
      <p>
       So it sucessfully generates solution somewhere inside of AppData, and when I build and execute it, black window without any text appears, despite of the fact that GetResource function returns some valid pointer.
      </p>
      <p>
       Also when I try to change working directory for CMake in CMakeSettigns.json, I  get the following error:
      </p>
      <pre><code> CMake Error at CMake/Modules/FindUrho3D.cmake:352 (message):
1&gt;   Could NOT find compatible Urho3D library in Urho3D SDK installation or
1&gt;   build tree.  Use URHO3D_HOME environment variable or build option to
1&gt;   specify the location of the non-default SDK installation or build tree.
1&gt;   Ensure the specified location contains the Urho3D library of the requested
1&gt;   library type.</code></pre>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       I haven’t tried VS2017 yet, so I don’t know how well it supports CMake directly. But assuming all it does is internally invoke “cmake” CLI then we can probably rule out that the source of your problem. Still, if I were you, I would try to isolate the problem first by manually invoking “cmake” to generate the build tree (solution file), then try to build the solution with VS.
      </p>
      <p>
       In your post you have linked to version 1.6 of the documentation. Also another common pitfall, note that our online doc are versioned. If you are using “master” branch in Git for the code then you have to use “HEAD” version of the online doc. Most notably the content of main CMakeList.txt is not entirely identical from version to version in general.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <aside class="quote" data-post="3" data-topic="3281">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/0432f633764925448b78e62239cefaaa83fe05d39fefd63b316359309922ae67.png" width="20"/>
        DainTorson:
       </div>
       <blockquote>
        <p>
         <strong>
          Error copying file
         </strong>
         (if different) from “D:/dev/urho-test/bin/Autoload” to “C:/Users/Ales/AppData/Local/CMakeBuild/b127fd59-b858-303f-8a0e-0b36e52b0dd1/build/x86-Debug/bin/Autoload”.
        </p>
       </blockquote>
      </aside>
      <p>
       Doesn’t look like it was a success. It looks more like you have no admin rights and it blocked copy.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       No. I strongly against using Admin account for doing development. Moreover the error line looks like because his project source tree doesn’t have Autoload directory.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       You don’t have to be logged into Admin account, just change your Command Prompt and give it admin rights.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       It’s analogy to executing any mundane dev process using sudo. Also a big NO in my book. But this is out of topic discussion.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       I think most Windows users are aware that certain apps require changing Admin rights and command prompt is one of them. sudo in Windows? huh.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       Of course I meant it’s equivalent to sudo on Linux (the host I am using).
       <img alt=":slightly_smiling_face:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slightly_smiling_face:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/d0db9f1146dcb24b37638641ed3fd7e1e8fd6f2a366473517dfb99144b50d735.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      DainTorson
     </div>
     <div class="post_content">
      <p>
       Thank you for the quick reply!
      </p>
      <p>
       So, I’ve generated the solution with the help of CMake GUI, but still have the same issue. I can build the project, but all I get is a black window instead of text, despite of the fact that GetResource function returns valid pointer. Is there any way to find why the text wasn’t created?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       Aha! Then what you are facing is probably not a build system related issue. If you build your project as a console app (see URHO3D_WIN32_CONSOLE build option) then you should be able to get some log entries from the console output/error streams. Or just use the debugger to step through your code.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/d0db9f1146dcb24b37638641ed3fd7e1e8fd6f2a366473517dfb99144b50d735.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      DainTorson
     </div>
     <div class="post_content">
      <p>
       I’ve finally managed to build the HelloWorld project, when I’ve enabled console. The problem was in the resourses that I didn’t copy from Data folder (I’ve only copied  fonts assuming it’s enough
       <img alt=":flushed:" class="emoji" src="../../../images/7356090df6d9c7a423495be295b2ceca90afeb0e6c2805e03dbd4b01d1753191.png" title=":flushed:"/>
       ).
      </p>
      <p>
       Anyway, many thanks for your help. It’s truly amazing to see such caring and active community.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/bcdbfbd7622a54267e5189250c086b7941163de1d8e6bb9dc43a78254fd745b5.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      JimSEOW
     </div>
     <div class="post_content">
      <p>
       Can u make your hello as a github so others do not have to repeat the challenges u face. Thanks
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/d0db9f1146dcb24b37638641ed3fd7e1e8fd6f2a366473517dfb99144b50d735.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      DainTorson
     </div>
     <div class="post_content">
      <p>
       No problem. I link the minimal example here:
      </p>
      <aside class="onebox whitelistedgeneric">
       <header class="source">
        <img class="site-icon" height="32" src="../../../images/70d613e3acfba24fd2876fcbacaf639e1e111ef4d54baf70761c47673f37d6a3.ico" width="32"/>
        <a href="https://github.com/DainTorson/urho-helloworld-vs2017/" rel="nofollow noopener" target="_blank">
         GitHub
        </a>
       </header>
       <article class="onebox-body">
        <img class="thumbnail onebox-avatar" height="300" src="../../../images/956fe3e4ca57a69a6df9a22bfe9bb844e8aef609aa9b61fdbb1243052fe1f36c" width="300"/>
        <h3>
         <a href="https://github.com/DainTorson/urho-helloworld-vs2017/" rel="nofollow noopener" target="_blank">
          DainTorson/urho-helloworld-vs2017
         </a>
        </h3>
        <p>
         urho-helloworld-vs2017 - Minimal example of Urho3D usage with VS2017
        </p>
       </article>
       <div class="onebox-metadata">
       </div>
       <div style="clear: both">
       </div>
      </aside>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>