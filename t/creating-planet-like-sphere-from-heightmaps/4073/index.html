<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Creating planet-like sphere from heightmaps
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Creating planet-like sphere from heightmaps
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/cf66e66f1a34cb6dbf63d2761fef95f7d786e31e709199a4b2854dd75998accf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      the_little_guy
     </div>
     <div class="post_content">
      <p>
       It’s my first post on the forum so I want to say hello to all.
      </p>
      <p>
       Moving onto my problem, I want to create a planet object using 6 heightmaps arranged in the cube-like structure and mapped to sphere as described in the article
       <a href="http://mathproofs.blogspot.com.au/2005/07/mapping-cube-to-sphere.html" rel="nofollow noopener">
        Mapping a Cube to a Sphere
       </a>
       .
       <br/>
       What I would like to know is whether I will have to reimplement some parts of Terrain class or is it possible to do this manipulating some of its data / using other existing features. I haven’t seen a definitive answer to the question on the forum. I don’t want to waste too much time looking into a solution that might be a dead end so if there is a different, simpler way to reach the same effect, please let me know.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f4d89a6ec8768b8bd5426c30c4812f04cddcb7e43e803179951cb20a4f1c8bf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Modanung
     </div>
     <div class="post_content">
      <p>
       Have you seen
       <span class="mention">
        @vivienneanthony
       </span>
       ’s work?
      </p>
      <aside class="quote quote-modified" data-post="1" data-topic="3929">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" loading="lazy" src="../../../images/c32562ee3331be839c42cdfec6a70439b5961ce020d6018f6c87d59b318253d1.png" width="20"/>
        <a href="https://discourse.urho3d.io/t/custom-terrainpatch-detailed-help/3929/">
         Custom TerrainPatch (Detailed) Help
        </a>
        <a class="badge-wrapper bullet" href="/c/discussions/support/10">
         <span class="badge-category-parent-bg" style="background-color: #25AAE2;">
         </span>
         <span class="badge-category-bg" style="background-color: #92278F;">
         </span>
         <span class="badge-category clear-badge" data-drop-close="true" style="" title="Someone can help you.">
          Support
         </span>
        </a>
       </div>
       <blockquote>
        I made some code that creates a sphere as a sample program. 
A example is
        <img alt="slight_smile" class="emoji" height="20" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title="slight_smile" width="20"/>
        <a href="https://imgur.com/a/jpGMw" rel="noopener nofollow ugc" target="_blank">
         [Album] Imgur
                  
                
                [Imgur]
        </a>
        I am converting the code to be similar to the
        <a href="https://www.youtube.com/watch?v=rL8zDgTlXso" rel="noopener nofollow ugc">
         https://www.youtube.com/watch?v=rL8zDgTlXso
        </a>
        and
        <a href="https://drive.google.com/open?id=1pMkiKikuD0tkTFc0e7S-olPw2-dfKPrm" rel="noopener nofollow ugc">
         https://drive.google.com/open?id=1pMkiKikuD0tkTFc0e7S-olPw2-dfKPrm
        </a>
        . 
The example of the code is here: 
  
The first goal is to …
       </blockquote>
      </aside>
      <p>
       Also, welcome to the forums!
       <img alt=":confetti_ball:" class="emoji" src="../../../images/f0e40083ca9e956baa5a2159c91f833a3b03b95f50f3a6a9b56b236794e7ae1e.png" title=":confetti_ball:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/cf66e66f1a34cb6dbf63d2761fef95f7d786e31e709199a4b2854dd75998accf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      the_little_guy
     </div>
     <div class="post_content">
      <p>
       Thanks for the answer :).
       <br/>
       Yes, I have seen
       <span class="mention">
        @vivienneanthony
       </span>
       ’s work, but from what I understand, he has rewritten Terrain class to support cube to sphere mapping (mind you - I’m new to Urho3D and might be wrong). Optimmally, I would like to do this without having to understand the inner workings of the library - 3D simulation is just a part of my project. I have raised the question because in the reported issue
       <a href="https://github.com/urho3d/Urho3D/issues/1801" rel="nofollow noopener">
        Creating a quad cube planet!
       </a>
       <span class="mention">
        @Lumak
       </span>
       has written something about the method.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/d126304f5103b2d7cee2c6e244e6a162b45a28fcb40bfc5dd544e0bbf8b220ea.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Sinoid
     </div>
     <div class="post_content">
      <p>
       That’s not possible without modifying the terrain class.
      </p>
      <p>
       It only supports a single-axis of displacement so even using the RG 16-bit encoding you won’t get a spherical result out of it. Most of its’
       <em>
        support
       </em>
       functions (normals and the like) are also written with the assumption of a heightmap so all of those are now meaningless.
      </p>
      <p>
       Vertex-shader fudgery to push out the vertices along the face tangent is fudgery and will not work even just for rendering as your patch bounding boxes will be incorrect- nevermind the other issues when you have to deal with collision.
      </p>
      <p>
       Even if you fudge things to make it work … you’ll already be in there making changes to make the fudgery work so you might as well as deal with it appropriately from the get-go. It’s a specialized task.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       I didn’t write anything with the cube-to-sphere conversion, just merely linked what I thought was more direct method using a mathematical conversion compared to the other programmatic approach.  The following cubed terrain picture was just rotation of the nodes for each terrain to shape it into a cube. And I didn’t keep any of that code.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/cf66e66f1a34cb6dbf63d2761fef95f7d786e31e709199a4b2854dd75998accf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      the_little_guy
     </div>
     <div class="post_content">
      <p>
       Yeah, I feared that would be the answer
       <img alt=":frowning:" class="emoji" src="../../../images/f52368fabff51bf20b9b2a7726cfecb3ca01ecdec8d99f872cca862812b131a7.png" title=":frowning:"/>
       . Well, I will probably start with trying to understand
       <span class="mention">
        @vivienneanthony
       </span>
       ’s work. Nevertheless, thanks again for quick response.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9eff032e89ec93f81cbb0a8b2e416c52be6a27abce27c4ed36911a61ed12cecf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      vivienneanthony
     </div>
     <div class="post_content">
      <aside class="quote no-group" data-post="6" data-topic="4073" data-username="the_little_guy">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/b0677bec178b7fc089a840431c9fea5c8b076e66e3583bc8d93eec4b0a201f56.png" width="20"/>
        the_little_guy:
       </div>
       <blockquote>
        <p>
         Yeah, I feared that would be the answer
         <img alt=":frowning:" class="emoji" src="../../../images/f52368fabff51bf20b9b2a7726cfecb3ca01ecdec8d99f872cca862812b131a7.png" title=":frowning:"/>
         . Well, I will probably start with trying to understand
         <span class="mention">
          @vivienneanthony
         </span>
         ’s work. Nevertheless, thanks again for quick response.
        </p>
       </blockquote>
      </aside>
      <p>
       You can check out the document pdf in
       <a class="inline-onebox" href="https://www.dropbox.com/s/7wlaewgc64ruenx/Procedurus_Source.zip" rel="noopener nofollow ugc">
        Dropbox - Procedurus_Source.zip - Simplify your life
       </a>
       . Right now I’m working with during it using no shader then shaders.
      </p>
      <p>
       As mentioned, its my work in progress. In some ways a working version would be awesome. Maybe a little game changing. Although some of the code might look similiar to Urho3D Terrain and TerrainPatch. This is a different beast technically. The physics part I think would work the same but the visual part would be different. Since, a working version can possibly lead to planet size Terrain. I think it changes a lot in how Urho3D would handle showing distance.  I can better describe it but check out the pdf because it explains a lot.
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>