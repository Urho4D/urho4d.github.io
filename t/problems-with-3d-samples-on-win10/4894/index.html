<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Problems with 3D samples on Win10
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Problems with 3D samples on Win10
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/15ec239d285c7ed0e587423843143e7382a3233e3f46ccb5ef7fb0e41eadd119.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      NinjaPangolin
     </div>
     <div class="post_content">
      <p>
       I used MinGW from
       <a href="https://nuwen.net/mingw.html" rel="nofollow noopener">
        Stephan Lavavej’s site
       </a>
       to compile Urho3D on Windows 7 and it worked just fine. Now I’ve updated to Windows 10 and successfully compiled the lib. Used default options (OpenGL renderer) with
       <code>
        cmake_mingw.bat build -DMINGW_SYSROOT=C:\MinGW
       </code>
       . 2D samples works fine, but 3D ones do not. Here’s how 13_CharacterDemo.exe looks like:
      </p>
      <p>
       <img alt="Urho3D" height="499" src="../../../images/7276dc5fb912fe602d0e61253e93b68115df28e323e44733d2e4d4de30daf973.png" width="645"/>
      </p>
      <p>
       It’s upside-down, model is squashed and moving the mouse causes it to be stretched into infinity. What is going on here?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/f8c56838151bae9112a91eeb86f55cc4ef2fdee5ef2d25afc934b4d508949063.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Leith
     </div>
     <div class="post_content">
      <p>
       Interestingly, the 2D UI stuff is not being affected - did you download the latest code from the master on github, or the older 1.7 stuff from the website? I’m running windows 10 in dual boot, and would be happy to verify and check out what happened.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/a90ddfa002995c31b5c93aca4213c480a31c7272db11e21266b71156c46856c7.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Eugene
     </div>
     <div class="post_content">
      <p>
       I have seen similar issues when there was compiler bug in VS 2017.
       <br/>
       Try DX9/11 just in case, and other compiler too.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/f8c56838151bae9112a91eeb86f55cc4ef2fdee5ef2d25afc934b4d508949063.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Leith
     </div>
     <div class="post_content">
      <p>
       A compiler bug somehow flips matrices? hmmm
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/15ec239d285c7ed0e587423843143e7382a3233e3f46ccb5ef7fb0e41eadd119.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      NinjaPangolin
     </div>
     <div class="post_content">
      <p>
       I use 1.7 version from the website because I have problems with compiling
       <code>
        ThirdParty/SLikeNet
       </code>
       with MinGW (no safe functions such as
       <code>
        strcpy_s
       </code>
       and
       <code>
        strcat_s
       </code>
       were available).
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/f8c56838151bae9112a91eeb86f55cc4ef2fdee5ef2d25afc934b4d508949063.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Leith
     </div>
     <div class="post_content">
      <p>
       I have to suspect SDL is at fault, without having looked closer
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/44af2cc7f66f8ae81d9d54e3c26dce121922cad21ac9383999d3d4d4db1d05fa.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Miegamicis
     </div>
     <div class="post_content">
      <aside class="quote no-group" data-full="true" data-post="5" data-topic="4894" data-username="NinjaPangolin">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/003ae1142dda2c7130eadf86e97291a45d4fc6d2210d560d9ed43c19cca0eb4d.png" width="20"/>
        NinjaPangolin:
       </div>
       <blockquote>
        <p>
         I use 1.7 version from the website because I have problems with compiling
         <code>
          ThirdParty/SLikeNet
         </code>
         with MinGW (no safe functions such as
         <code>
          strcpy_s
         </code>
         and
         <code>
          strcat_s
         </code>
         were available).
        </p>
       </blockquote>
      </aside>
      <p>
       Could you create issue about this on Github with the Windows version, MinGW version etc. so I can take a look at this?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/a90ddfa002995c31b5c93aca4213c480a31c7272db11e21266b71156c46856c7.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Eugene
     </div>
     <div class="post_content">
      <p>
       <span class="mention">
        @Leith
       </span>
       There was a bug that 16th argument of the function was just ignored. So the matrix got slightly mis-constructed that resulted in weird projection artifacts.
      </p>
      <p>
       <span class="mention">
        @NinjaPangolin
       </span>
       I thought SLikeNet issues were fixed. I highly recommend to use
       <code>
        master
       </code>
       version whenever possible.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/f8c56838151bae9112a91eeb86f55cc4ef2fdee5ef2d25afc934b4d508949063.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Leith
     </div>
     <div class="post_content">
      <p>
       thanks for the heads up, I am not used to seeing ‘half’ of the render get inverted
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/3ea7a1555aff4c5b3dd0274b8e7ae351c7e22708a771f0a92691672b7da6e609.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      S.L.C
     </div>
     <div class="post_content">
      <p>
       Isn’t this the good ol GCC 8.x matrix issue?
       <a href="https://github.com/urho3d/Urho3D/issues/2326" rel="nofollow noopener">
        https://github.com/urho3d/Urho3D/issues/2326
       </a>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/f8c56838151bae9112a91eeb86f55cc4ef2fdee5ef2d25afc934b4d508949063.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Leith
     </div>
     <div class="post_content">
      <p>
       Looks like it, argument limits are annoying and wrong
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/15ec239d285c7ed0e587423843143e7382a3233e3f46ccb5ef7fb0e41eadd119.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      NinjaPangolin
     </div>
     <div class="post_content">
      <p>
       <span class="mention">
        @Miegamicis
       </span>
       , I’ve created the issue:
       <a href="https://github.com/urho3d/Urho3D/issues/2416" rel="nofollow noopener">
        https://github.com/urho3d/Urho3D/issues/2416
       </a>
      </p>
      <p>
       Tried to build with DirectX (
       <code>
        cmake_mingw.bat build_direct -DMINGW_SYSROOT=C:\MinGW -DURHO3D_D3D11=1
       </code>
       ), also with Lavavej’s MinGW 16.1, got different error:
      </p>
      <blockquote>
       <p>
        CMake Error at C:/Program Files/CMake/share/cmake-3.13/Modules/FindPackageHandleStandardArgs.cmake:137 (message):
        <br/>
        Could NOT find DirectX using MinGW default search paths (missing: D3D11)
        <br/>
        Call Stack (most recent call first):
        <br/>
        C:/Program Files/CMake/share/cmake-3.13/Modules/FindPackageHandleStandardArgs.cmake:378 (_FPHSA_FAILURE_MESSAGE)
        <br/>
        CMake/Modules/FindDirectX.cmake:239 (find_package_handle_standard_args)
        <br/>
        CMake/Modules/UrhoCommon.cmake:470 (find_package)
        <br/>
        CMakeLists.txt:45 (include)
       </p>
       <p>
        – Configuring incomplete, errors occurred!
        <br/>
        See also “C:/GameProject/Urho3D/build_direct/CMakeFiles/CMakeOutput.log”.
        <br/>
        See also “C:/GameProject/Urho3D/build_direct/CMakeFiles/CMakeError.log”.
       </p>
      </blockquote>
      <p>
       Looks like it’s related to
       <a href="https://github.com/urho3d/Urho3D/issues/1247" rel="nofollow noopener">
        this
       </a>
       .
      </p>
      <p>
       Currently trying to compile Urho 1.7 with MinGW 16.0 version (GCC 8.1.0 instead of GCC 8.2.0), though if it’s really GCC 8.X.X then I guess it won’t help. I’ll try 7.3 next time.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/f8c56838151bae9112a91eeb86f55cc4ef2fdee5ef2d25afc934b4d508949063.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Leith
     </div>
     <div class="post_content">
      <p>
       Thank you for raising this issue. I tend to fix issues or complain, you took the time. I commend you.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/44af2cc7f66f8ae81d9d54e3c26dce121922cad21ac9383999d3d4d4db1d05fa.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Miegamicis
     </div>
     <div class="post_content">
      <p>
       Thanks, will take a look at this!
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/15ec239d285c7ed0e587423843143e7382a3233e3f46ccb5ef7fb0e41eadd119.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      NinjaPangolin
     </div>
     <div class="post_content">
      <p>
       Removing
       <code>
        -ffast-math
       </code>
       from
       <code>
        Urho3D/CMake/Modules/UrhoCommon.cmake
       </code>
       helped.
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>