<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   How to pass properties to lights shader (custom global unif
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    How to pass properties to lights shader (custom global unif
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/c01b8b8b05b6aab492df6eeace88e2282147607ff86cdc28638e9227819a3fcc.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Bananaft
     </div>
     <div class="post_content">
      <p>
       So I hacking and messing with differed lighting. And I need a way to pass some extra properties to Directional Light. There will be always only one directional light, so this properties may be global. What is the easiest way to do it?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ad9bc7eb192b88d1c364c9b8fb8f80cf85ee14d41f54e1ae6101313dd36e4cba.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      friesencr
     </div>
     <div class="post_content">
      <p>
       Without modifying any of urhos source you will have to add a parameter to every material that gets rendered.
      </p>
      <p>
       If you modify the source you get more options.  The light queue process in the batch seems like a good place:
      </p>
      <p>
       <a href="https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Graphics/Batch.cpp#L306" rel="nofollow noopener">
        github.com/urho3d/Urho3D/blob/m … h.cpp#L306
       </a>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/c01b8b8b05b6aab492df6eeace88e2282147607ff86cdc28638e9227819a3fcc.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Bananaft
     </div>
     <div class="post_content">
      <p>
       Thank you for such quick reply.
      </p>
      <aside class="quote">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/a27c760b0f0e4cc7cfef9678119aba515d73b166b14480ad72604173ec6142a1.png" width="20"/>
        friesencr:
       </div>
       <blockquote>
        <p>
         Without modifying any of urhos source you will have to add a parameter to every material that gets rendered.
        </p>
       </blockquote>
      </aside>
      <p>
       Yeah, that’s kind of thing I want to avoid, especially with deferred lighting.
      </p>
      <p>
       [quote=“friesencr”]If you modify the source you get more options.  The light queue process in the batch seems like a good place:
      </p>
      <p>
       <a href="https://github.com/urho3d/Urho3D/blob/master/Source/Urho3D/Graphics/Batch.cpp#L306" rel="nofollow noopener">
        github.com/urho3d/Urho3D/blob/m … h.cpp#L306
       </a>
       [/quote]
       <br/>
       Thanks for the link, I’ll study it up.
      </p>
      <p>
       I think, separate renderpath quad-command may also work for me, since you can add custom uniforms for it, and even change them from script. And directional light is just a screen sized quad as well.
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>