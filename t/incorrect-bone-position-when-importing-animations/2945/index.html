<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Incorrect bone position when importing animations
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Incorrect bone position when importing animations
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/22dcac3074cfaa8d881edc1010d0a07c937c088822a24d56baa1c731cf6c6bcf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Florastamine
     </div>
     <div class="post_content">
      <p>
       I’ve been banging my head against the wall the last few days trying to figure out the problem. When using AssetImporter through the editor to import my FBX file, meshes, textures, materials, and animations all went through fine. However when playing the animation, part of the bones are not correctly positioned, like this: (the weapon model and the hand model are not in sync):
      </p>
      <p>
       <img height="387" src="../../../images/8501e1adb2d3ca6c0e63be47d50d305620628932afb7921df55aa5a824c5bd63.jpg" width="690"/>
      </p>
      <p>
       Whereas when I tried to import the file to both Autodesk FBX Converter and FBX Review, both shows correct bone positioning and animations:
       <a href="http://i.imgur.com/IjAf9QU.jpg" rel="nofollow noopener">
        here
       </a>
       and
       <a href="http://i.imgur.com/DhIsSd2.jpg" rel="nofollow noopener">
        here
       </a>
       ; and even fragMotion:
       <a class="inline-onebox-loading" href="http://i.imgur.com/V4zytig.jpg" rel="nofollow noopener">
        i.imgur.com/V4zytig.jpg
       </a>
      </p>
      <p>
       What exactly is causing the issue, and is there any tools that I can use to somehow alter the animation data stored in .ani files? I tried moving nodes around in the editor, trying different AssetImporter options (-np), even to the point of writing an alternative version of Animation::Save() to save the animations to a xml but still no luck trying to alter animation data.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/5d46ae636e9e1695d23c3cfa4111ef6c78f876a386883243a8e2928668728d83.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      KonstantTom
     </div>
     <div class="post_content">
      <p>
       I had the same issue when tryed to use FBX files in Unity. And there was the same issue when I tryed to import this FBX files to Urho3D. I don’t know why this happends. Try
       <a href="https://github.com/reattiva/Urho3D-Blender" rel="nofollow noopener">
        Blender to Urho3D exporter
       </a>
       , it solves this problem in my case.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/22dcac3074cfaa8d881edc1010d0a07c937c088822a24d56baa1c731cf6c6bcf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Florastamine
     </div>
     <div class="post_content">
      <p>
       Thanks! I would definitely give it a look. It seems like a really nice plugin and all, the only problem now is I don’t really know any Blender :&lt;
      </p>
      <p>
       By the way, I fixed it… sort of. Don’t know why, but I converted the .fbx to Ogre’s .mesh.xml and .skeleton.xml, then imported back to Urho using OgreImporter. Surprisingly, the bones are now shown and positioned correctly. Animations are now played without problems.
      </p>
      <p>
       FBXs are really a hassle to work with.
       <br/>
       <img height="387" src="../../../images/41e2a8924461536fbb9154e83021de7f7cd143442d222166645921a3081736d0.jpg" width="690"/>
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>