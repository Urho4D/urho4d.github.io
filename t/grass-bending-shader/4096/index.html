<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Grass bending shader
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Grass bending shader
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/d810aa1dd979a5c8db3b6d0294588b69a8215f93e681cdc858fbdc963aedce1f.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      smellymumbler
     </div>
     <div class="post_content">
      <p>
       Does anyone know how this thing works?
      </p>
      <aside class="onebox twitterstatus">
       <header class="source">
        <a href="https://twitter.com/Patrickd3/status/974284520328433666" rel="nofollow noopener" target="_blank">
         twitter.com
        </a>
       </header>
       <article class="onebox-body">
        <img class="thumbnail onebox-avatar" height="306" src="../../../images/4c5b6914fccfaf1d343075e9001ee806bedaeae5ee61e33050fdedbbec207ce4.jpg" width="498"/>
        <h4>
         <a href="https://twitter.com/Patrickd3/status/974284520328433666" rel="nofollow noopener" target="_blank">
          Patrick Haraguti (Patrickd3)
         </a>
        </h4>
        <div class="tweet">
         Touch Bend Waving grass mega blaster shader LOL! 
based in the @Juicefoozle  shader, ItÂ´s Collaboration Baby!!! graph shader after 1k likes LOL ðŸ¤£
@AmplifyCreates @gekido @Adamjcmyhill #Unity #madewithunity #indiedev #gamedev https://t.co/8Wuae0gAiw
        </div>
        <div class="date">
         <a href="https://twitter.com/Patrickd3/status/974284520328433666" rel="nofollow noopener" target="_blank">
          7:01 AM - 15 Mar 2018
         </a>
         <span class="like">
          <svg aria-hidden="true" height="16px" viewbox="0 0 512 512" width="14px">
           <path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z">
           </path>
          </svg>
          62
         </span>
         <span class="retweet">
          <svg aria-hidden="true" height="16px" viewbox="0 0 640 512" width="14px">
           <path d="M629.657 343.598L528.971 444.284c-9.373 9.372-24.568 9.372-33.941 0L394.343 343.598c-9.373-9.373-9.373-24.569 0-33.941l10.823-10.823c9.562-9.562 25.133-9.34 34.419.492L480 342.118V160H292.451a24.005 24.005 0 0 1-16.971-7.029l-16-16C244.361 121.851 255.069 96 276.451 96H520c13.255 0 24 10.745 24 24v222.118l40.416-42.792c9.285-9.831 24.856-10.054 34.419-.492l10.823 10.823c9.372 9.372 9.372 24.569-.001 33.941zm-265.138 15.431A23.999 23.999 0 0 0 347.548 352H160V169.881l40.416 42.792c9.286 9.831 24.856 10.054 34.419.491l10.822-10.822c9.373-9.373 9.373-24.569 0-33.941L144.971 67.716c-9.373-9.373-24.569-9.373-33.941 0L10.343 168.402c-9.373 9.373-9.373 24.569 0 33.941l10.822 10.822c9.562 9.562 25.133 9.34 34.419-.491L96 169.881V392c0 13.255 10.745 24 24 24h243.549c21.382 0 32.09-25.851 16.971-40.971l-16.001-16z">
           </path>
          </svg>
          8
         </span>
        </div>
       </article>
       <div class="onebox-metadata">
       </div>
       <div style="clear: both">
       </div>
      </aside>
      <p>
       Any article that could help me understand it?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f4d89a6ec8768b8bd5426c30c4812f04cddcb7e43e803179951cb20a4f1c8bf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Modanung
     </div>
     <div class="post_content">
      <p>
       <a href="https://twitter.com/Juicefoozle/status/974026650794020869" rel="nofollow noopener">
        <img alt="" height="305" src="../../../images/9559fe2183b09d0faba5783d64f1c41c407dd2e5dc501ba2d37286490df75cfc.jpg" width="690"/>
       </a>
      </p>
      <p>
       Good luck!
       <img alt=":wink:" class="emoji" src="../../../images/f6b86554472159b74d0ab91b2cb3cd75cf361ccf96a141a4ebd3363c38e7f8eb.png" title=":wink:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/d126304f5103b2d7cee2c6e244e6a162b45a28fcb40bfc5dd544e0bbf8b220ea.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Sinoid
     </div>
     <div class="post_content">
      <p>
       He uses the direction from the
       <code>
        player
       </code>
       to the vertex to offset XZ and determines everything from the absolute distance to the surface of a sphere. The rest of the shader is controls, partially for tweaks and partially for fudging the curved look.
      </p>
      <p>
       All of the gradients are unnecessary if designing by convention where the implied model-space gradient is a-ok (vertices are all in a unorm/snorm space on certain axes).
      </p>
      <p>
       Everything else is just falloff control and other controls.
      </p>
      <pre><code>float3 playerToVertex = vertexPosition - playerPosition;
float3 directionFromPlayer = normalize(playerToVertex);
float distanceFromSphere = abs(length(playerToVertex) - sphereRadius);

float3 baseXZOffset = float3(directionFromPlayer.x, 0, directionFromPlayer.z) * distanceFromSphere;

float gravityFactor = ... gravity determination here ...
float bendinessFactor = ... bendiness/XZ determination here ...

float3 vertexOffset = (baseXZOffset * bendinessFactor) - float3(0, distanceFromSphere * gravityFactor, 0);
outputVertexPosition += vertexOffset;</code></pre>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>