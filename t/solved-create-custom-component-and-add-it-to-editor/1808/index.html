<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   [Solved] Create custom component and add it to editor
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    [Solved] Create custom component and add it to editor
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f6862503a77a8e2bcb2b39d9a9e2609bd99454cd0e508100cb29c14ed3d25ad.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lichi
     </div>
     <div class="post_content">
      <p>
       Hi, I need to create a component that i can add to some node and edit the parameters in editor. How i can do it?
       <br/>
       (I’m read something about angelscript component but i don’t know if it’s the same as a node component)
       <br/>
       Thanks.
       <br/>
       PS: sorry for my english.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/a9aa60fc39b46d07cb2562f0b11ec4762a64197339da1365b1faaafe4f4b3be8.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      thebluefish
     </div>
     <div class="post_content">
      <p>
       Create your Component in C++:
      </p>
      <pre><code class="lang-auto">class Player : public Urho3D::Component</code></pre>
      <p>
       -or-
      </p>
      <pre><code class="lang-auto">class Player : public Urho3D::LogicComponent</code></pre>
      <p>
       Register it with Urho3D with a category:
      </p>
      <pre><code class="lang-auto">void Player::RegisterObject(Urho3D::Context* context)
{
	context-&gt;RegisterFactory&lt;Player&gt;("Game");
}</code></pre>
      <p>
       and compile this Component into Urho3D player. Then when you run the modified player, it will be available to edit. Any attributes that you register with the component will show in the attribute panel unless you specify AM_NOEDIT for the attribute.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f6862503a77a8e2bcb2b39d9a9e2609bd99454cd0e508100cb29c14ed3d25ad.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lichi
     </div>
     <div class="post_content">
      <p>
       [quote=“thebluefish”]Create your Component in C++:
      </p>
      <pre><code class="lang-auto">class Player : public Urho3D::Component</code></pre>
      <p>
       -or-
      </p>
      <pre><code class="lang-auto">class Player : public Urho3D::LogicComponent</code></pre>
      <p>
       Register it with Urho3D with a category:
      </p>
      <pre><code class="lang-auto">void Player::RegisterObject(Urho3D::Context* context)
{
	context-&gt;RegisterFactory&lt;Player&gt;("Game");
}</code></pre>
      <p>
       and compile this Component into Urho3D player. Then when you run the modified player, it will be available to edit. Any attributes that you register with the component will show in the attribute panel unless you specify AM_NOEDIT for the attribute.[/quote]
      </p>
      <p>
       Thanks!
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
       <br/>
       I added my custom component to the Urho editor, but when i try to add it to a node i’m get this error: “Could not create unknown component type”
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/a9aa60fc39b46d07cb2562f0b11ec4762a64197339da1365b1faaafe4f4b3be8.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      thebluefish
     </div>
     <div class="post_content">
      <p>
       Means you didn’t register it.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9e06bdaa9b192f1c9d4940fdd01e33b947cc0445d7b50f3766849acf8c3db6d9.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      1vanK
     </div>
     <div class="post_content">
      <p>
       You need component on AngelScrip or C++ ?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f6862503a77a8e2bcb2b39d9a9e2609bd99454cd0e508100cb29c14ed3d25ad.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lichi
     </div>
     <div class="post_content">
      <aside class="quote no-group" data-username="thebluefish">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/4b1209bc2cff158cac3deb94b06eafe95cc328b5f8c8b58f2a70b4f3a07aa61e.png" width="20"/>
        thebluefish:
       </div>
       <blockquote>
        <p>
         Means you didn’t register it.
        </p>
       </blockquote>
      </aside>
      <p>
       I copied the ragdoll component sample and register it in Urho Player using this line:
      </p>
      <pre><code class="lang-auto">context_-&gt;RegisterFactory&lt;CreateRagdoll&gt;("Physics");</code></pre>
      <p>
       I have to add another line?
      </p>
      <aside class="quote no-group" data-username="1vanK">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/a1e7f9ad87f0f286c93981b5211d942802658cbde3e5ac7e346468cf1d0aceb2.png" width="20"/>
        1vanK:
       </div>
       <blockquote>
        <p>
         You need component on AngelScrip or C++ ?
        </p>
       </blockquote>
      </aside>
      <p>
       Angelscript i think it’s, because i have to be able to edit it in the editor
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/a9aa60fc39b46d07cb2562f0b11ec4762a64197339da1365b1faaafe4f4b3be8.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      thebluefish
     </div>
     <div class="post_content">
      <aside class="quote no-group" data-username="Lichi">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/5766d74a7be630c0fbd3cf1ad323120dee3808d11e31df6128bbdda61760e4f2.png" width="20"/>
        Lichi:
       </div>
       <blockquote>
        <p>
         [quote=“thebluefish”]Means you didn’t register it.
        </p>
       </blockquote>
      </aside>
      <p>
       I copied the ragdoll component sample and register it in Urho Player using this line:
      </p>
      <pre><code class="lang-auto">context_-&gt;RegisterFactory&lt;CreateRagdoll&gt;("Physics");</code></pre>
      <p>
       I have to add another line?
       <br/>
       [/quote]
      </p>
      <p>
       You need to register your own class. If your Component is named “Test”, then it would look like:
      </p>
      <pre><code class="lang-auto">context_-&gt;RegisterFactory&lt;CreateRagdoll&gt;("Physics");</code></pre>
      <p>
       This needs to be called before the script is loaded. Probably should include it as the very first call in Urho3DPlayer::Setup().
      </p>
      <p>
       [quote=“Lichi”]
      </p>
      <aside class="quote no-group" data-username="1vanK">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/a1e7f9ad87f0f286c93981b5211d942802658cbde3e5ac7e346468cf1d0aceb2.png" width="20"/>
        1vanK:
       </div>
       <blockquote>
        <p>
         You need component on AngelScrip or C++ ?
        </p>
       </blockquote>
      </aside>
      <p>
       Angelscript i think it’s, because i have to be able to edit it in the editor[/quote]
      </p>
      <p>
       The editor is made in AS but can use components in C++. It doesn’t need to be made in AS.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f6862503a77a8e2bcb2b39d9a9e2609bd99454cd0e508100cb29c14ed3d25ad.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lichi
     </div>
     <div class="post_content">
      <p>
       Thanks!!!
       <img alt=":smiley:" class="emoji" src="../../../images/771063f3b2b4950334f4d187069c87041036842149b3e4268221db325b6bde0e.png" title=":smiley:"/>
       <br/>
       The error was that you said
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9e06bdaa9b192f1c9d4940fdd01e33b947cc0445d7b50f3766849acf8c3db6d9.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      1vanK
     </div>
     <div class="post_content">
      <p>
       [quote=“Lichi”]
       <br/>
       Angelscript i think it’s, because i have to be able to edit it in the editor[/quote]
      </p>
      <p>
       See
       <a href="http://Rotator.as">
        Rotator.as
       </a>
       . You can connect it to node, and it will rotade
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>