<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Best way to define and save JSON?
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Best way to define and save JSON?
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/df201b5031d9c21119ec0bfebe0327f1fc14a141b0f9acd22faec5ce2f165c39.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      ksmit799
     </div>
     <div class="post_content">
      <p>
       Hey everyone,
      </p>
      <p>
       I’m wondering what’s the best way to programmatically create an empty JSON object (file), populate it with some data and then save it to the file system. An abridged version of what I’m trying to do is below, however, when saving the file it only contains the text ‘null’ and nothing else. Any help would be appreciated.
      </p>
      <pre><code>// Creating the *new* JSON file.
settings_ = context_-&gt;CreateObject&lt;JSONFile&gt;();
// The root object seems to be the issue?
// It appears as if it is null unless you load an existing JSON file.
JSONValue root = settings_-&gt;GetRoot();
// Create some dummy data.
root.Set("test", "it works");
// Save the new JSON file.
settings_-&gt;SaveFile(path);
</code></pre>
      <p>
       Expected file contents:
       <br/>
       { “test”: “it works”}
      </p>
      <p>
       Actual file contents:
       <br/>
       null
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f4d89a6ec8768b8bd5426c30c4812f04cddcb7e43e803179951cb20a4f1c8bf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Modanung
     </div>
     <div class="post_content">
      <p>
       Try:
      </p>
      <pre><code class="lang-auto">JSONValue root{};
root.Set("test", "it works");

settings_ = context_-&gt;CreateObject&lt;JSONFile&gt;();
settings_-&gt;GetRoot() = root;
settings_-&gt;SaveFile(path);
</code></pre>
      <p>
       And welcome to the forums!
       <img alt=":confetti_ball:" class="emoji" src="../../../images/f0e40083ca9e956baa5a2159c91f833a3b03b95f50f3a6a9b56b236794e7ae1e.png" title=":confetti_ball:"/>
       <img alt=":slightly_smiling_face:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slightly_smiling_face:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/df201b5031d9c21119ec0bfebe0327f1fc14a141b0f9acd22faec5ce2f165c39.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      ksmit799
     </div>
     <div class="post_content">
      <p>
       Thanks for the help and welcome! I was able to get it saving properly using the snippet you provided.
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>