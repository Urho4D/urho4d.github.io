<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Offroad vehicle
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Offroad vehicle
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       Here,
       <a data-bbcode="true" href="https://github.com/Lumak/Urho3D-Offroad-Vehicle/">
        https://github.com/Lumak/Urho3D-Offroad-Vehicle/
       </a>
      </p>
      <h3>
       To Build
      </h3>
      <p>
       To build it,
       <strong>
        unzip/drop the repository into your Urho3D/ folder
       </strong>
       and build it the same way as you’d build the default Samples that comes with Urho3D.
      </p>
      <p>
       I hope everyone can see the emphasis
       <span class="bbcode-b">
        ^
       </span>
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
      </p>
      <p>
       screenshot
       <br/>
       <img alt="" src="../../../images/a82160c2a5a56240fcd932d780f2f72bff6bd988230c999a95f4bde5ce3189d6.jpg"/>
      </p>
      <p>
       Let me know if I missed anything, thx.
      </p>
      <p>
       Edit: added instruction on how to build it.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/92028b5b94650c5db30122b34a44946b7fc1cfc731bd7f99650f6e64feafdcc1.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      artgolf1000
     </div>
     <div class="post_content">
      <p>
       Great example!
       <br/>
       I use Urho3D because of its excellent document and plenty of useful examples.
       <br/>
       Most important, it is one alive project.
       <br/>
       I had used GamePlay engine before, but it is almost dead now.
       <br/>
       To keep an engine alive, the best way is using it to do some actual projects.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/5775ca4ae33489a2bcc299dd30363673c37d994ec83cfc8b666b914026ff2719.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      rasteron
     </div>
     <div class="post_content">
      <p>
       awesome work Lumak!
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       <span class="mention">
        @artgolf
       </span>
       , Thx, I’m also familiar with GamePlay. I’ve played around with that for a day then I discovered Urho3D
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
       But I agree, ppl making projects out of the engine is a good way to keep it alive.
      </p>
      <p>
       <span class="mention">
        @rasteron
       </span>
       , thx, I hope you find it useful.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/3ea7a1555aff4c5b3dd0274b8e7ae351c7e22708a771f0a92691672b7da6e609.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      S.L.C
     </div>
     <div class="post_content">
      <p>
       Can’t seem to be able to compile. I’m getting some undefined errors. Related to the changes made to Bullet. Perhaps I need to do a clean build.
      </p>
      <p>
       Also, what version of Urho is this for, 1.6 release? I used the last one from the repository.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       <span class="mention">
        @SLC
       </span>
       , it is 1.6. I think I sync’d to the head about two weeks ago.
      </p>
      <p>
       My first guess for the Bullet compile errors is that you only grabbed the files in 63_OffroadVehicle folder? There are source/header files in Source/ThirdParty/Bullet and Source/Urho3D folders that are in the repo.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/3ea7a1555aff4c5b3dd0274b8e7ae351c7e22708a771f0a92691672b7da6e609.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      S.L.C
     </div>
     <div class="post_content">
      <p>
       Nah. I actually copied and overwrote everything that was in the source folder. But I’ll try a clean build and if the problem still persists.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       For my testing, I drop the repo into a virgin urho3d 1.6 folder and do the build to ensure all source, header, and data are copied.
       <br/>
       But on an existing built folder, I imagine the changes in the header files from the repo would require a rebuild if the dependency make files didn’t pick it up automatically.
      </p>
      <p>
       Good luck with the build and let me know how it turns out.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/019827bd0eb5e2a8d89da424f98a6ecba77e382dc37ded5fbae64aa8977db78d.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      dakilla
     </div>
     <div class="post_content">
      <p>
       Nice, physics seems sweet in video, I’ll test it soon.
       <br/>
       thanks
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/668470d56163353e1e4d4d67dadbcf02db3f7389e58e6e01b1650a16815e3949.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Enhex
     </div>
     <div class="post_content">
      <p>
       Looks like it works very well!
      </p>
      <p>
       If anyone is looking for a video:
       <br/>
       <div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="9ZAnvz2f_hU" data-youtube-title="urho3d offroad vehicle prototype">
       </div>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       Made changes in the repo to access and scale compound local AABB to allows changing the inertia bbox and reduce the chance of rolling when aabb.y is reduced.
      </p>
      <p>
       About the video, the dust emitters are not properly placed and were corrected in the repo, but I kinda like how it looks in the video
       <img alt=":wink:" class="emoji" src="../../../images/f6b86554472159b74d0ab91b2cb3cd75cf361ccf96a141a4ebd3363c38e7f8eb.png" title=":wink:"/>
      </p>
      <p>
       Merry Christmas
       <img alt=":slight_smile:" class="emoji" src="../../../images/8a8941f0486df9dda1e89ec988e1591cf959e1ea7809a249dc2decb694b30a6c.png" title=":slight_smile:"/>
      </p>
      <p>
       edit: keeping positive attitude toward the holidays
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/44af2cc7f66f8ae81d9d54e3c26dce121922cad21ac9383999d3d4d4db1d05fa.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Miegamicis
     </div>
     <div class="post_content">
      <p>
       Found a bug with the offroad vehicle code. The problem appears when vehicle node is destroyed, raycast vehicle is not removed from the physics world and in the next physics step update application crashes.
      </p>
      <p>
       To fix this you need to change
      </p>
      <p>
       <code>
        RaycastVehicle::~RaycastVehicle()
{
    if (sphShape_)
    {
        delete sphShape_;
        sphShape_ = NULL;
    }
    if (vehicleRaycaster_)
    {
        delete vehicleRaycaster_;
        vehicleRaycaster_ = NULL;
    }
    if (raycastVehicle_)
    {
        delete raycastVehicle_;
        raycastVehicle_ = NULL;
    }
}
       </code>
      </p>
      <p>
       to
      </p>
      <p>
       <code>
        RaycastVehicle::~RaycastVehicle()
{
    if (sphShape_)
    {
        delete sphShape_;
        sphShape_ = NULL;
    }
    if (vehicleRaycaster_)
    {
        delete vehicleRaycaster_;
        vehicleRaycaster_ = NULL;
    }
    if (raycastVehicle_)
    {
        btDynamicsWorld *pbtDynWorld = (btDynamicsWorld*)GetPhysicsWorld()-&gt;GetWorld();
        pbtDynWorld-&gt;removeVehicle(raycastVehicle_);
        delete raycastVehicle_;
        raycastVehicle_ = NULL;
    }
}
       </code>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       Ok, thanks.  This crash doesn’t appear in Windows, which os?
      </p>
      <p>
       edit: this makes sense if the game continues to run after a vehicle is removed.  good find, thx.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/44af2cc7f66f8ae81d9d54e3c26dce121922cad21ac9383999d3d4d4db1d05fa.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Miegamicis
     </div>
     <div class="post_content">
      <p>
       [quote=“Lumak”]Ok, thanks.  This crash doesn’t appear in Windows, which os?
      </p>
      <p>
       edit: this makes sense if the game continues to run after a vehicle is removed.  good find, thx.[/quote]
      </p>
      <p>
       I used Windows. But anyway, great sample! Managed to get this to work without any problems!
       <img alt=":wink:" class="emoji" src="../../../images/f6b86554472159b74d0ab91b2cb3cd75cf361ccf96a141a4ebd3363c38e7f8eb.png" title=":wink:"/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/80bde861c77550d90483f49160c7430615be130b45f85f9e97f624fa530c4d32.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Virgo
     </div>
     <div class="post_content">
      <p>
       is this for 1.6 only? i tried t do it with 1.7 and failed building the example, it says missing headers
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/1942bc04975c75156629598f61ba11bcc001f312ff469070f61448e051f874dd.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Lumak
     </div>
     <div class="post_content">
      <p>
       I dropped the offroad repo into a fresh 1.7 sandbox, built it, and saw that the last change that I submitted for the
       <strong>
        void Vehicle::AutoCorrectPitchRoll()
       </strong>
       fn. actually had error using the hullBody_ var. I updated the repo just now with the correction.
      </p>
      <p>
       Thanks for the feedback on this, as I rarely get any.
       <br/>
       Btw, are you aware that 46_RaycastVehicle sample was added to Urho3D in 1.7? It’s an adaptation of the raycast demo posted from about three yrs ago, so it should be similar, although, I haven’t test it myself.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/80bde861c77550d90483f49160c7430615be130b45f85f9e97f624fa530c4d32.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Virgo
     </div>
     <div class="post_content">
      <p>
       i tried the examples come with official urho3d repo.
       <br/>
       but vehicle in both 19_VehicleDemo and 46_RaycastVehicle starts rolling if i accelerate too much
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>