<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Forcing Collision but making Mass to Unmovable
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Forcing Collision but making Mass to Unmovable
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9eff032e89ec93f81cbb0a8b2e416c52be6a27abce27c4ed36911a61ed12cecf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      vivienneanthony
     </div>
     <div class="post_content">
      <p>
       Hi,
      </p>
      <p>
       Is there a way to make something collidable but not movable. For example a wall.
      </p>
      <p>
       Vivienne
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       So does the floor, doesn’t it?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9eff032e89ec93f81cbb0a8b2e416c52be6a27abce27c4ed36911a61ed12cecf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      vivienneanthony
     </div>
     <div class="post_content">
      <aside class="quote">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/0cf59ce0315b40e419c5880c4cc7ce42bfee4362fec2d6c44d96ea426f303658.png" width="20"/>
        weitjong:
       </div>
       <blockquote>
        <p>
         So does the floor, doesn’t it?
        </p>
       </blockquote>
      </aside>
      <p>
       Not sure how to respond. It’s late and tired so it’s working. I have some quick run through video prob in my morning.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/035f283cae2d056de202879867b5272fcc6bf7558625c1c9ffb77812527e2fac.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      cadaver
     </div>
     <div class="post_content">
      <p>
       You probably figured it out already, but a Rigidbody with mass 0 (static mode) combined with a CollisionShape creates an unmovable colliding object. This can be a triangle mesh shape too (unlike moving objects that cannot be triangle meshes reliably).
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9eff032e89ec93f81cbb0a8b2e416c52be6a27abce27c4ed36911a61ed12cecf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      vivienneanthony
     </div>
     <div class="post_content">
      <aside class="quote">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/ca279ebb6e6913836d33ed2ab6856e015c310c0ee4589ca403b0e7e5a2b3f50f.png" width="20"/>
        cadaver:
       </div>
       <blockquote>
        <p>
         You probably figured it out already, but a Rigidbody with mass 0 (static mode) combined with a CollisionShape creates an unmovable colliding object. This can be a triangle mesh shape too (unlike moving objects that cannot be triangle meshes reliably).
        </p>
       </blockquote>
      </aside>
      <p>
       Yup. I’m just figuring out the best collision setup.  MakeHuman places origins at the base of a skeleton which I think should be centered.  So to use a good bound setup I will have to test the dimensions of a mesh and offset collision bound to the center.
      </p>
      <p>
       I would love to use convex hull but I have to make a mechanism to reorient itself based on collision areas, gravity, free fall and health. As to camera points for first person view I might use a xml to store mesh attachnent point coordinates.
      </p>
      <p>
       Hmmm.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9eff032e89ec93f81cbb0a8b2e416c52be6a27abce27c4ed36911a61ed12cecf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      vivienneanthony
     </div>
     <div class="post_content">
      <aside class="quote">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/ca279ebb6e6913836d33ed2ab6856e015c310c0ee4589ca403b0e7e5a2b3f50f.png" width="20"/>
        cadaver:
       </div>
       <blockquote>
        <p>
         You probably figured it out already, but a Rigidbody with mass 0 (static mode) combined with a CollisionShape creates an unmovable colliding object. This can be a triangle mesh shape too (unlike moving objects that cannot be triangle meshes reliably).
        </p>
       </blockquote>
      </aside>
      <p>
       The video is at
       <a href="http://www.youtube.com/watch?v=vcFBM_5I_C4&amp;list=UUTObP1VzcIglm7uTgUBQjaw" rel="nofollow noopener">
        www.youtube.com/watch?v=vcFBM_5I_C4&amp;lis … 7uTgUBQjaw
       </a>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9eff032e89ec93f81cbb0a8b2e416c52be6a27abce27c4ed36911a61ed12cecf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      vivienneanthony
     </div>
     <div class="post_content">
      <aside class="quote">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/ca279ebb6e6913836d33ed2ab6856e015c310c0ee4589ca403b0e7e5a2b3f50f.png" width="20"/>
        cadaver:
       </div>
       <blockquote>
        <p>
         You probably figured it out already, but a Rigidbody with mass 0 (static mode) combined with a CollisionShape creates an unmovable colliding object. This can be a triangle mesh shape too (unlike moving objects that cannot be triangle meshes reliably).
        </p>
       </blockquote>
      </aside>
      <p>
       Hello
      </p>
      <p>
       Is this correct to get a static point center and use it for making the colliding area? I mean to use the bounding box center to set the offset? It seems to be almost accurate.
      </p>
      <p>
       Vivienne
      </p>
      <pre><code class="lang-auto">// character class
void ExistenceClient::CreateCharacter(void)
{
    // get resources
    ResourceCache* cache = GetSubsystem&lt;ResourceCache&gt;();
    Renderer* renderer = GetSubsystem&lt;Renderer&gt;();
    Graphics* graphics = GetSubsystem&lt;Graphics&gt;();
    UI* ui = GetSubsystem&lt;UI&gt;();
    FileSystem * filesystem = GetSubsystem&lt;FileSystem&gt;();

    //String characternode = String("Character");
    LoadCharacterMesh("Character",1,1);

    Node* objectNode = scene_-&gt;GetChild("Character");

    // Create rigidbody, and set non-zero mass so that the body becomes dynamic
    RigidBody* body = objectNode-&gt;CreateComponent&lt;RigidBody&gt;();
    body-&gt;SetCollisionLayer(1);
    body-&gt;SetMass(.2f);

    StaticModel * staticmodelreference = objectNode-&gt;GetComponent&lt;StaticModel&gt;();
    Model * staticmodel=staticmodelreference-&gt;GetModel();

    BoundingBox   staticmodelbox = staticmodel-&gt;GetBoundingBox();
    Vector3  staticmodelboxcenter= Vector3(staticmodelbox.max_-staticmodelbox.min_)/2;

    // Set zero angular factor so that physics doesn't turn the character on its own.
    // Instead we will control the character yaw manually
    body-&gt;SetAngularFactor(Vector3::ZERO);

    // Set the rigidbody to signal collision also when in rest, so that we get ground collisions properly
    body-&gt;SetCollisionEventMode(COLLISION_ALWAYS);

    // Set a capsule shape for collision
    CollisionShape* shape = objectNode-&gt;CreateComponent&lt;CollisionShape&gt;();
    //shape-&gt;SetConvexHull(cache-&gt;GetResource&lt;Model&gt;("Resources/Models/standardfemale:Body.mdl"));
    shape-&gt;SetBox(Vector3::ONE);
    shape-&gt;SetPosition(Vector3(staticmodelboxcenter));
    shape-&gt;SetLodLevel(1);

    //objectNode-&gt;SetPosition(Vector3(staticmodelboxcenter));
    character_ = objectNode-&gt;CreateComponent&lt;Character&gt;();

    // Create a scene node for the camera, which we will move around
    // The camera will use default settings (1000 far clip distance, 45 degrees FOV, set aspect ratio automatically)
    Node * cameraNode_ = objectNode -&gt;CreateChild("CameraFirstPerson");

    // Set an initial position for the camera scene node above the plane
    cameraNode_-&gt;SetPosition(Vector3(0.0f,0.9f,0.185821f));
    cameraNode_-&gt;SetRotation(Quaternion(0.0,0.0,0.0));

    Camera* cameraObject = cameraNode_-&gt;CreateComponent&lt;Camera&gt;();
    cameraObject-&gt;SetOrthographic(0);
    cameraObject-&gt;SetZoom(1);

    ExistenceGameState.SetCameraMode(CAMERAMODE_FIRSTPERSON);

    // Set up a viewport to the Renderer subsystem so that the 3D scene can be seen. We need to define the scene and the camera
    // at minimum. Additionally we could configure the viewport screen size and the rendering path (eg. forward / deferred) to
    // use, but now we just use full screen and default render path configured	SetOrthographic ( in the engine command line options
    //viewport -&gt; SetCamera(cameraObject);

    SharedPtr&lt;Viewport&gt; viewport(new Viewport(context_, scene_, cameraObject));
    renderer-&gt;SetViewport(0, viewport);

    return;
}</code></pre>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/035f283cae2d056de202879867b5272fcc6bf7558625c1c9ffb77812527e2fac.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      cadaver
     </div>
     <div class="post_content">
      <p>
       Yes, if you want the collision capsule to be centered on the visible mesh’s bounding box, then that’s correct. You could also use the Center() member function of BoundingBox.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9eff032e89ec93f81cbb0a8b2e416c52be6a27abce27c4ed36911a61ed12cecf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      vivienneanthony
     </div>
     <div class="post_content">
      <aside class="quote">
       <div class="title">
        <div class="quote-controls">
        </div>
        <img alt="" class="avatar" height="20" src="../../../images/ca279ebb6e6913836d33ed2ab6856e015c310c0ee4589ca403b0e7e5a2b3f50f.png" width="20"/>
        cadaver:
       </div>
       <blockquote>
        <p>
         Yes, if you want the collision capsule to be centered on the visible mesh’s bounding box, then that’s correct. You could also use the Center() member function of BoundingBox.
        </p>
       </blockquote>
      </aside>
      <p>
       I’ll probably use that in a rewrite. The way I did it I realized is a line or two longer but I learned some of the inner workings this way at the same time.
      </p>
      <p>
       The next feat is either the terrain texture or perlin generated height map.
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>