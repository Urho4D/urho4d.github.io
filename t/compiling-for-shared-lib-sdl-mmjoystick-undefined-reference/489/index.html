<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Compiling for SHARED Lib: SDL_mmjoystick undefined reference
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Compiling for SHARED Lib: SDL_mmjoystick undefined reference
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9023a46d1e5f64afe55578cf16d3ebf97552e8c6dcbb6c286563fa12327d5599.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      kestli
     </div>
     <div class="post_content">
      <p>
       Hello my friends
       <br/>
       I have a small problem of reference when I compile Urho3D with SHARED option.
       <br/>
       When I compile for STATIC lib, I do not have any problem.
       <br/>
       Thanks for any answer…
      </p>
      <aside class="quote">
       <blockquote>
        <p>
         C:\mingw64\bin\x86_64-w64-mingw32-g++.exe     -static -shared -o E:\Downloads\Urho3D-1.31\Bin\Urho3D.dll -Wl,–out-implib,E:\Downloads\Urho3D-1.31\Lib\libUrho3D.dll.a -Wl,–major-image-version,0,–minor-image-version,0 -Wl,–whole-archive CMakeFiles\Urho3D.dir/objects.a -Wl,–no-whole-archive -luser32 -lgdi32 -lwinmm -limm32 -lole32 -loleaut32 -lversion -luuid -lws2_32 -lwinmm -lopengl32 -Wl,–whole-archive …\ThirdParty\Bullet\libBullet.a …\ThirdParty\Civetweb\libCivetweb.a …\ThirdParty\Detour\libDetour.a …\ThirdParty\FreeType\libFreeType.a …\ThirdParty\JO\libJO.a …\ThirdParty\kNet\libkNet.a …\ThirdParty\LZ4\libLZ4.a …\ThirdParty\PugiXml\libPugiXml.a …\ThirdParty\Recast\libRecast.a …\ThirdParty\SDL\libSDL.a …\ThirdParty\StanHull\libStanHull.a …\ThirdParty\STB\libSTB.a …\ThirdParty\AngelScript\libAngelScript.a …\ThirdParty\GLEW\libGLEW.a …\ThirdParty\LibCpuId\libLibCpuId.a -Wl,–no-whole-archive -limm32 -lole32 -loleaut32 -lversion -luuid -lws2_32 -lopengl32 …\ThirdParty\Bullet\libBullet.a …\ThirdParty\Civetweb\libCivetweb.a …\ThirdParty\Detour\libDetour.a …\ThirdParty\FreeType\libFreeType.a …\ThirdParty\JO\libJO.a …\ThirdParty\kNet\libkNet.a …\ThirdParty\LZ4\libLZ4.a …\ThirdParty\PugiXml\libPugiXml.a …\ThirdParty\Recast\libRecast.a …\ThirdParty\SDL\libSDL.a …\ThirdParty\StanHull\libStanHull.a …\ThirdParty\STB\libSTB.a …\ThirdParty\AngelScript\libAngelScript.a …\ThirdParty\GLEW\libGLEW.a …\ThirdParty\LibCpuId\libLibCpuId.a -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32
         <br/>
         …\ThirdParty\SDL\libSDL.a(SDL_mmjoystick.c.obj):SDL_mmjoystick.c:(.text+0x4a): undefined reference to
         <code>
          __imp_joyGetNumDevs' ..\ThirdParty\SDL\\libSDL.a(SDL_mmjoystick.c.obj):SDL_mmjoystick.c:(.text+0x7b): undefined reference to
         </code>
         __imp_joyGetPosEx’
         <br/>
         …\ThirdParty\SDL\libSDL.a(SDL_mmjoystick.c.obj):SDL_mmjoystick.c:(.text+0xe1): undefined reference to
         <code>
          __imp_joyGetDevCapsA' ..\ThirdParty\SDL\\libSDL.a(SDL_mmjoystick.c.obj):SDL_mmjoystick.c:(.text+0x655): undefined reference to
         </code>
         __imp_joyGetPosEx’
         <br/>
         c:/mingw64/bin/…/lib/gcc/x86_64-w64-mingw32/4.7.3/…/…/…/…/x86_64-w64-mingw32/bin/ld.exe: …\ThirdParty\SDL\libSDL.a(SDL_mmjoystick.c.obj): bad reloc address 0x0 in section
         <code>
          .pdata' collect2.exe: error: ld returned 1 exit status Engine\CMakeFiles\Urho3D.dir\build.make:4842: recipe for target
         </code>
         E:/Downloads/Urho3D-1.31/Bin/Urho3D.dll’ failed
         <br/>
         mingw32-make[2]: *** [E:/Downloads/Urho3D-1.31/Bin/Urho3D.dll] Error 1
         <br/>
         mingw32-make[2]: Leaving directory
         <code>
          E:/Downloads/Urho3D-1.31/Build' CMakeFiles\Makefile2:885: recipe for target
         </code>
         Engine/CMakeFiles/Urho3D.dir/all’ failed
         <br/>
         mingw32-make[1]: *** [Engine/CMakeFiles/Urho3D.dir/all] Error 2
         <br/>
         mingw32-make[1]: Leaving directory
         <code>
          E:/Downloads/Urho3D-1.31/Build' makefile:136: recipe for target
         </code>
         all’ failed
         <br/>
         mingw32-make: *** [all] Error 2
        </p>
       </blockquote>
      </aside>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       I am not able to reproduce your problem with the SHARED lib type MinGW build on my Win7 (virtual) host system. How did you generate the MinGW makefile? Did you use our CMake build script?
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9023a46d1e5f64afe55578cf16d3ebf97552e8c6dcbb6c286563fa12327d5599.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      kestli
     </div>
     <div class="post_content">
      <p>
       Hallo  weitjong, thanks for your time.
       <br/>
       I have used Cmake-GUI to generate the project for Eclipse but sight your answer-question have compiled with the script and executed mingw32-make from the commands line and this time has not given to me herror any.
       <br/>
       Sometimes one chooses the most difficult and less suitable way to do the things.
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>