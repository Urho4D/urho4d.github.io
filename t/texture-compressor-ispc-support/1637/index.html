<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Texture Compressor (ISPC support)
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Texture Compressor (ISPC support)
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/6f717edbbb6794a81024a65a0b329f4d47f598f032ada0b9ad3e06d3c5e8ecc7.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      boberfly
     </div>
     <div class="post_content">
      <p>
       Hi all,
      </p>
      <p>
       I’ve had time to do some dev work and managed to get a basic texture compressor to work, and Intel’s ISPC files to build with Urho3D/CMake.
      </p>
      <p>
       Here it is:
       <br/>
       <a data-bbcode="true" href="https://github.com/boberfly/Urho3D/tree/ispc_texcomp" rel="nofollow noopener">
        https://github.com/boberfly/Urho3D/tree/ispc_texcomp
       </a>
      </p>
      <p>
       Currently it is working (I think), however I’m only doing a raw image dump of the result and not filling out the header info for ktx or dds (yet) or supporting mips or arrays.
      </p>
      <p>
       This should allow things like transcoding uncompressed images to GPU-compressed formats on the fly, or having a tool in Urho3D to do the conversion instead of relying on a third-party tool.
      </p>
      <p>
       To build it from my branch, make sure -DURHO3D_ISPC_TEXCOMP is set, and you have the environment variable $ISPC_DIR pointing to where the ispc binary is located. You can get a build of ISPC or build it yourself from here:
       <br/>
       <a data-bbcode="true" href="https://ispc.github.io/" rel="nofollow noopener">
        https://ispc.github.io/
       </a>
      </p>
      <p>
       More info on the compression library here:
       <br/>
       <a data-bbcode="true" href="https://software.intel.com/en-us/articles/fast-ispc-texture-compressor-update" rel="nofollow noopener">
        https://software.intel.com/en-us/articles/fast-ispc-texture-compressor-update
       </a>
      </p>
      <p>
       You’ll also notice that I’m adding ASTC texture compression support. In another branch I’ve managed to get OpenGL ES 3.1 to work, but that’s for another post.
      </p>
      <p>
       There’s some potential to allow SIMD optimisation in Urho3D by using ISPC files here and there, and combining it with the task worker pool system could have some really big performance wins in some places. It also covers Arm’s Neon instruction-set and it will try to use this when building for Arm (the binary release of ISPC from Intel doesn’t seem to expose this backend though so I haven’t tested it yet). At runtime it will also pick the best instruction set to use based on CPU.
      </p>
      <p>
       Enjoy
       <br/>
       -Alex
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/684585e23c00534a4d0cb1c1bc542909f34fad260b0ad446b3e3b5a99d7771d5.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      sabotage3d
     </div>
     <div class="post_content">
      <p>
       That’s great. Can’t wait to try it on ES 3.1.
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>