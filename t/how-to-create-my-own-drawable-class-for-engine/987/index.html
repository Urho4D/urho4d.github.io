<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   How to create my own drawable class for engine?
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    How to create my own drawable class for engine?
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/99fa533ba971225d184f3822eb1f3228de6f8ecc6709fef5e966baa0a2c496fa.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      camel
     </div>
     <div class="post_content">
      <p>
       hello everyone
       <br/>
       i come from china and i like urho3d
       <br/>
       i have some problem and please help me,thanks
       <br/>
       for urho3d-master, compiled and completed with vs2012.
      </p>
      <p>
       I want to create an own skybox in the engines.
       <br/>
       So I created MySkyBox.h, MySkyBox.cpp in D: \ Urho3D-master \ Source \ Urho3D \ Graphics
       <br/>
       Here is the code of these two documents
      </p>
      <p>
       MySkyBox.h
      </p>
      <pre><code class="lang-auto">#pragma once
#include "../Graphics/StaticModel.h"
namespace Urho3D
{
class URHO3D_API MySkyBox:public StaticModel
{
	OBJECT(MySkyBox);
public:
	MySkyBox(Context* context);
	virtual ~MySkyBox();

	static void RegisterObject(Context* context);

	virtual void ProcessRayQuery(const RayOctreeQuery&amp; query, PODVector&lt;RayQueryResult&gt;&amp; results){};
	virtual void UpdateBatches(const FrameInfo&amp; frame){};
protected:
	virtual void OnWorldBoundingBoxUpdate(){};
};
}</code></pre>
      <p>
       MySkyBox.cpp
      </p>
      <pre><code class="lang-auto">#include "../Scene/Node.h"
#include "../Graphics/MySkyBox.h"

#include "../DebugNew.h"

namespace Urho3D
{
	MySkyBox::MySkyBox(Context* context):StaticModel(context)
	{

	}
}</code></pre>
      <p>
       For simplicity, I just wrote a little code.
       <br/>
       But I compile MySkyBox.cpp appeared in the 202 error.
      </p>
      <p>
       My English is not good, please forgive me
       <br/>
       And please help me for the above problem
       <br/>
       ??! (thanks!)
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/99fa533ba971225d184f3822eb1f3228de6f8ecc6709fef5e966baa0a2c496fa.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      camel
     </div>
     <div class="post_content">
      <p>
       Picture
      </p>
      <p>
       <img alt="" height="" src="../../../images/81cb0ca55a07043d5d3fb74f741f9858fc88434c4fd07cc19b2998d68840f172.jpg" width=""/>
      </p>
      <p>
       <img alt="" height="" src="../../../images/81cb0ca55a07043d5d3fb74f741f9858fc88434c4fd07cc19b2998d68840f172.jpg" width=""/>
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       Welcome to our forum (???)
      </p>
      <p>
       I am not sure why you need to write another skybox component but assuming this is just for exercise to get to know Urho3D library then I suppose the compilation error you encountered was due to missing include of “Urho3D.h”. You don’t see this include statement explicitly being written in the original library code because it has already been added in the precompiled header file used when building the library. For your own code, you will always need to include this “Urho3D.h” as the first thing you do. Unless you also use the same trick as Urho3D project to add that include into another precompiled header file specific for your own project.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/99fa533ba971225d184f3822eb1f3228de6f8ecc6709fef5e966baa0a2c496fa.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      camel
     </div>
     <div class="post_content">
      <p>
       [quote=“weitjong”]Welcome to our forum (???)
      </p>
      <p>
       I am not sure why you need to write another skybox component but assuming this is just for exercise to get to know Urho3D library then I suppose the compilation error you encountered was due to missing include of “Urho3D.h”. You don’t see this include statement explicitly being written in the original library code because it has already been added in the precompiled header file used when building the library. For your own code, you will always need to include this “Urho3D.h” as the first thing you do. Unless you also use the same trick as Urho3D project to add that include into another precompiled header file specific for your own project.[/quote]
      </p>
      <p>
       First of all, thank you for your help, it really works.
       <br/>
       It makes me feel very friendly forum.
       <br/>
       I created another skybox Component is to practice
       <br/>
       thanks again
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/55a28ac655e792ddc5641665e82bbc3cd322414b90de6ccf16537644a3e53276.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      jmiller
     </div>
     <div class="post_content">
      <p>
       Welcome to the forum, camel.
      </p>
      <p>
       I also started with Skybox when I started creating my own sky component.
      </p>
      <p>
       You can also use this form of include, if you add your build tree include directory to system headers path.
       <br/>
       <span class="hashtag">
        #include
       </span>
       &lt;Urho3D/Graphics/StaticModel.h&gt;
      </p>
      <p>
       If you would like hints on making a new Component…
      </p>
      <p>
       Remember to register your component. You can do this in your Application constructor.
       <br/>
       MySkyBox::RegisterObject(context);
      </p>
      <p>
       Method (declared
       <span class="bbcode-i">
        static
       </span>
       in header):
      </p>
      <p>
       <code>
        void MySkyBox::RegisterObject(Context* context) {
  context-&gt;RegisterFactory&lt;MySkyBox&gt;();
  COPY_BASE_ATTRIBUTES(StaticModel);
}
       </code>
      </p>
      <p>
       If you override OnNodeSet(), you might want to also call the base version there: StaticModel::OnNodeSet(node).
      </p>
      <p>
       One problem I had (which could be my mistake): My Skybox often did not load the Model + Material automatically, so I used something like this in OnNodeSet():
       <br/>
       SetModel(GetSubsystem()-&gt;GetResource(“models/box.mdl”));
       <br/>
       SetMaterial(GetSubsystem()-&gt;GetResource(“materials/Skybox.xml”));
      </p>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>