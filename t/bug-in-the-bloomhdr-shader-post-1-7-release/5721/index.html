<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <title>
   Bug in the bloomhdr shader post 1.7 release
  </title>
  <link href="../../../archived.css" rel="stylesheet"/>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
  </script>
  <script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
  </script>
 </head>
 <body>
  <header class="header">
   <div class="title-span">
    <a href="../../../">
     <img alt="Urho3D" height="40" id="site-logo" src="../../../images/site-logo.png"/>
    </a>
   </div>
  </header>
  <div class="main">
   <div class="archive-span">
    Archive 19/01/2023.
   </div>
   <h1 class="topic-title">
    Bug in the bloomhdr shader post 1.7 release
   </h1>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/27c36258617970ac4ccb6219afed56a10dd28796b8cb8833472cd5d643d9ebec.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      PsychoCircuitry
     </div>
     <div class="post_content">
      <p>
       I had noticed that sometime after the 1.7 release the bloomhdr shader started looking awful, pixelated and not very “bloomy”. I spent some time looking into it today and discovered the cause.
      </p>
      <p>
       The bloom shader uses the passed in uniform variables for inverse size and offset. Documentation for renderpath says these uniforms are case sensitive to the render target name. Well apparently the cases don’t match between the render targets and uniforms, so what was happening was just stacking pixelated textures with no blur.
      </p>
      <p>
       The fix is simple, either capitalize the render target names in the render path xml or change the uniform definitions to lowercase.
      </p>
      <p>
       I’m not sure what the preferred approach is as render targets seem to always be defined with lowercase names and uniforms always start c-uppercase.
      </p>
      <p>
       This issue only occurred post 1.7 release.
      </p>
      <p>
       Hope this is helpful to someone.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/ac13286af345bef5a8e8da90a88e9fc0e9d6f349d8aa367436e7ffdeeddaeb9e.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      weitjong
     </div>
     <div class="post_content">
      <p>
       Could you raise this as a bug in our issue tracker. Thanks.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/27c36258617970ac4ccb6219afed56a10dd28796b8cb8833472cd5d643d9ebec.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      PsychoCircuitry
     </div>
     <div class="post_content">
      <p>
       Ok, posted to the issue tracker on GitHub.
      </p>
      <p>
       Also, the ldr bloom shader is affected by this same issue.
      </p>
     </div>
    </div>
   </div>
   <div class="post_container">
    <div class="avatar_container">
     <img class="avatar" src="../../../images/9f4d89a6ec8768b8bd5426c30c4812f04cddcb7e43e803179951cb20a4f1c8bf.png"/>
    </div>
    <div class="post">
     <div class="user_name">
      Modanung
     </div>
     <div class="post_content">
      <aside class="onebox githubissue">
       <header class="source">
        <a href="https://github.com/urho3d/Urho3D/issues/2542" target="_blank">
         github.com/urho3d/Urho3D
        </a>
       </header>
       <article class="onebox-body">
        <div class="github-row">
         <div class="github-icon-container" title="Issue">
          <svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 14 16" width="60">
           <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z">
           </path>
          </svg>
         </div>
         <div class="github-info-container">
          <h4>
           <a href="https://github.com/urho3d/Urho3D/issues/2542" target="_blank">
            Bug in bloom and bloomhdr shaders post 1.7 release
           </a>
          </h4>
          <div class="github-info">
           <div class="date">
            opened
            <span class="discourse-local-date" data-date="2019-11-12" data-format="ll" data-time="09:16:22" data-timezone="UTC">
             09:16AM - 12 Nov 19 UTC
            </span>
           </div>
           <div class="user">
            <a href="https://github.com/PsychoCircuitry" target="_blank">
             <img alt="PsychoCircuitry" class="onebox-avatar-inline" height="20" src="../../../images/bffff4112eb1ffbe26aebadbc52a458e16f60c9763bc53f6996cbee9ed798142" width="20"/>
             PsychoCircuitry
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="github-row">
         <p class="github-content">
          I had noticed that sometime after the 1.7 release the bloomhdr shader started looking awful, pixelated and not very “bloomy”. I...
         </p>
        </div>
        <div class="labels">
        </div>
       </article>
       <div class="onebox-metadata">
       </div>
       <div style="clear: both">
       </div>
      </aside>
     </div>
    </div>
   </div>
  </div>
 </body>
</html>